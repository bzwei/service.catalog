<?xml version="1.0" encoding="UTF-8"?>
<bpmn2:definitions xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://www.omg.org/bpmn20" xmlns:bpmn2="http://www.omg.org/spec/BPMN/20100524/MODEL" xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI" xmlns:bpsim="http://www.bpsim.org/schemas/1.0" xmlns:color="http://www.omg.org/spec/BPMN/non-normative/color" xmlns:dc="http://www.omg.org/spec/DD/20100524/DC" xmlns:di="http://www.omg.org/spec/DD/20100524/DI" xmlns:drools="http://www.jboss.org/drools" id="_dUJ_cD9hEeiZX4h7kLhn_g" xsi:schemaLocation="http://www.omg.org/spec/BPMN/20100524/MODEL BPMN20.xsd http://www.jboss.org/drools drools.xsd http://www.bpsim.org/schemas/1.0 bpsim.xsd" exporter="jBPM Designer" exporterVersion="6.2.0" expressionLanguage="http://www.mvel.org/2.0" targetNamespace="http://www.omg.org/bpmn20" typeLanguage="http://www.java.com/javaTypes">
  <bpmn2:itemDefinition id="_approvalRequestItem" structureRef="com.redhat.servicecatlog.ServiceRequest"/>
  <bpmn2:itemDefinition id="_requesterNameItem" structureRef="String"/>
  <bpmn2:itemDefinition id="_serviceNameItem" structureRef="String"/>
  <bpmn2:itemDefinition id="_userLabelItem" structureRef="String"/>
  <bpmn2:itemDefinition id="_projectLabelItem" structureRef="String"/>
  <bpmn2:itemDefinition id="_serviceLabelItem" structureRef="String"/>
  <bpmn2:itemDefinition id="_approvalStatusItem" structureRef="String"/>
  <bpmn2:itemDefinition id="__4F0575FD-1ABB-4087-B353-2685994F92BD_requestFactInputXItem" structureRef="com.redhat.servicecatlog.ServiceRequest"/>
  <bpmn2:itemDefinition id="__4F0575FD-1ABB-4087-B353-2685994F92BD_requestFactOutputXItem" structureRef="com.redhat.servicecatlog.ServiceRequest"/>
  <bpmn2:itemDefinition id="__FF877B7D-F76D-4671-98A2-43A814CF2BC5_TaskNameInputXItem" structureRef="String"/>
  <bpmn2:itemDefinition id="__FF877B7D-F76D-4671-98A2-43A814CF2BC5_inputRequestInputXItem" structureRef="com.redhat.servicecatlog.ServiceRequest"/>
  <bpmn2:itemDefinition id="__FF877B7D-F76D-4671-98A2-43A814CF2BC5_SkippableInputXItem" structureRef="Object"/>
  <bpmn2:itemDefinition id="__FF877B7D-F76D-4671-98A2-43A814CF2BC5_TaskNameInputXItem568" structureRef="String"/>
  <bpmn2:itemDefinition id="__FF877B7D-F76D-4671-98A2-43A814CF2BC5_outputStatusOutputXItem" structureRef="String"/>
  <bpmn2:process id="apprvoal.ServiceCatalogApproval" drools:packageName="org.jbpm" drools:version="1.0" name="ServiceCatalogApproval">
    <bpmn2:property id="approvalRequest" itemSubjectRef="_approvalRequestItem"/>
    <bpmn2:property id="requesterName" itemSubjectRef="_requesterNameItem"/>
    <bpmn2:property id="serviceName" itemSubjectRef="_serviceNameItem"/>
    <bpmn2:property id="userLabel" itemSubjectRef="_userLabelItem"/>
    <bpmn2:property id="projectLabel" itemSubjectRef="_projectLabelItem"/>
    <bpmn2:property id="serviceLabel" itemSubjectRef="_serviceLabelItem"/>
    <bpmn2:property id="approvalStatus" itemSubjectRef="_approvalStatusItem"/>
    <bpmn2:startEvent id="processStartEvent" drools:selectable="true" color:background-color="#9acd32" color:border-color="#000000" color:color="#000000" name="">
      <bpmn2:extensionElements>
        <drools:metaData name="elementname">
          <drools:metaValue><![CDATA[]]></drools:metaValue>
        </drools:metaData>
      </bpmn2:extensionElements>
      <bpmn2:outgoing>_7F56DA34-E1CE-46A3-A31F-E1A28930BD00</bpmn2:outgoing>
    </bpmn2:startEvent>
    <bpmn2:businessRuleTask id="_4F0575FD-1ABB-4087-B353-2685994F92BD" drools:selectable="true" drools:ruleFlowGroup="approval_group" drools:scriptFormat="http://www.java.com/java" color:background-color="#fafad2" color:border-color="#000000" color:color="#000000" name="ApprovalRules">
      <bpmn2:extensionElements>
        <drools:metaData name="elementname">
          <drools:metaValue><![CDATA[ApprovalRules]]></drools:metaValue>
        </drools:metaData>
      </bpmn2:extensionElements>
      <bpmn2:incoming>_CC23BBB4-1F53-4491-9263-C75DEC26C519</bpmn2:incoming>
      <bpmn2:outgoing>_7225B280-6E01-4585-AC7B-A5FC5534BF24</bpmn2:outgoing>
      <bpmn2:ioSpecification id="_dUJ_cT9hEeiZX4h7kLhn_g">
        <bpmn2:dataInput id="_4F0575FD-1ABB-4087-B353-2685994F92BD_requestFactInputX" drools:dtype="com.redhat.servicecatlog.ServiceRequest" itemSubjectRef="__4F0575FD-1ABB-4087-B353-2685994F92BD_requestFactInputXItem" name="requestFact"/>
        <bpmn2:dataOutput id="_4F0575FD-1ABB-4087-B353-2685994F92BD_requestFactOutputX" drools:dtype="com.redhat.servicecatlog.ServiceRequest" itemSubjectRef="__4F0575FD-1ABB-4087-B353-2685994F92BD_requestFactOutputXItem" name="requestFact"/>
        <bpmn2:inputSet id="_dUJ_cj9hEeiZX4h7kLhn_g">
          <bpmn2:dataInputRefs>_4F0575FD-1ABB-4087-B353-2685994F92BD_requestFactInputX</bpmn2:dataInputRefs>
        </bpmn2:inputSet>
        <bpmn2:outputSet id="_dUJ_cz9hEeiZX4h7kLhn_g">
          <bpmn2:dataOutputRefs>_4F0575FD-1ABB-4087-B353-2685994F92BD_requestFactOutputX</bpmn2:dataOutputRefs>
        </bpmn2:outputSet>
      </bpmn2:ioSpecification>
      <bpmn2:dataInputAssociation id="_dUJ_dD9hEeiZX4h7kLhn_g">
        <bpmn2:sourceRef>approvalRequest</bpmn2:sourceRef>
        <bpmn2:targetRef>_4F0575FD-1ABB-4087-B353-2685994F92BD_requestFactInputX</bpmn2:targetRef>
      </bpmn2:dataInputAssociation>
      <bpmn2:dataOutputAssociation id="_dUJ_dT9hEeiZX4h7kLhn_g">
        <bpmn2:sourceRef>_4F0575FD-1ABB-4087-B353-2685994F92BD_requestFactOutputX</bpmn2:sourceRef>
        <bpmn2:targetRef>approvalRequest</bpmn2:targetRef>
      </bpmn2:dataOutputAssociation>
    </bpmn2:businessRuleTask>
    <bpmn2:exclusiveGateway id="_50EA3FE4-C792-4BE0-8FBA-00274D1ECAE1" drools:selectable="true" drools:dg="" color:background-color="#f0e68c" color:border-color="#a67f00" color:color="#000000" name="" gatewayDirection="Diverging">
      <bpmn2:incoming>_7225B280-6E01-4585-AC7B-A5FC5534BF24</bpmn2:incoming>
      <bpmn2:outgoing>_70EAFBD3-AE96-4D01-8CE1-CBA5693274EF</bpmn2:outgoing>
      <bpmn2:outgoing>_DD4E808B-3000-47F0-82FE-5C22E753BD32</bpmn2:outgoing>
    </bpmn2:exclusiveGateway>
    <bpmn2:sequenceFlow id="_7225B280-6E01-4585-AC7B-A5FC5534BF24" drools:selectable="true" color:background-color="#000000" color:border-color="#000000" color:color="#000000" sourceRef="_4F0575FD-1ABB-4087-B353-2685994F92BD" targetRef="_50EA3FE4-C792-4BE0-8FBA-00274D1ECAE1"/>
    <bpmn2:scriptTask id="_FF877B7D-F76D-4671-98A2-43A814CF2BC5" drools:selectable="true" color:background-color="#fafad2" color:border-color="#000000" color:color="#000000" name="UserApproval" scriptFormat="http://www.java.com/java">
      <bpmn2:extensionElements>
        <drools:metaData name="elementname">
          <drools:metaValue><![CDATA[UserApproval]]></drools:metaValue>
        </drools:metaData>
      </bpmn2:extensionElements>
      <bpmn2:incoming>_70EAFBD3-AE96-4D01-8CE1-CBA5693274EF</bpmn2:incoming>
      <bpmn2:outgoing>_883B0EEB-C528-4DE7-B191-974CC1099130</bpmn2:outgoing>
      <bpmn2:ioSpecification id="_dUJ_dj9hEeiZX4h7kLhn_g">
        <bpmn2:dataInput id="_FF877B7D-F76D-4671-98A2-43A814CF2BC5_TaskNameInputX" drools:dtype="String" itemSubjectRef="__FF877B7D-F76D-4671-98A2-43A814CF2BC5_TaskNameInputXItem" name="TaskName"/>
        <bpmn2:dataInput id="_FF877B7D-F76D-4671-98A2-43A814CF2BC5_inputRequestInputX" drools:dtype="com.redhat.servicecatlog.ServiceRequest" itemSubjectRef="__FF877B7D-F76D-4671-98A2-43A814CF2BC5_inputRequestInputXItem" name="inputRequest"/>
        <bpmn2:dataInput id="_FF877B7D-F76D-4671-98A2-43A814CF2BC5_SkippableInputX" drools:dtype="Object" itemSubjectRef="__FF877B7D-F76D-4671-98A2-43A814CF2BC5_SkippableInputXItem" name="Skippable"/>
        <bpmn2:dataInput id="_FF877B7D-F76D-4671-98A2-43A814CF2BC5_TaskNameInputX" drools:dtype="String" itemSubjectRef="__FF877B7D-F76D-4671-98A2-43A814CF2BC5_TaskNameInputXItem568" name="TaskName"/>
        <bpmn2:dataOutput id="_FF877B7D-F76D-4671-98A2-43A814CF2BC5_outputStatusOutputX" drools:dtype="String" itemSubjectRef="__FF877B7D-F76D-4671-98A2-43A814CF2BC5_outputStatusOutputXItem" name="outputStatus"/>
        <bpmn2:inputSet id="_dUJ_dz9hEeiZX4h7kLhn_g">
          <bpmn2:dataInputRefs>_FF877B7D-F76D-4671-98A2-43A814CF2BC5_inputRequestInputX</bpmn2:dataInputRefs>
          <bpmn2:dataInputRefs>_FF877B7D-F76D-4671-98A2-43A814CF2BC5_SkippableInputX</bpmn2:dataInputRefs>
          <bpmn2:dataInputRefs>_FF877B7D-F76D-4671-98A2-43A814CF2BC5_TaskNameInputX</bpmn2:dataInputRefs>
          <bpmn2:dataInputRefs>_FF877B7D-F76D-4671-98A2-43A814CF2BC5_TaskNameInputX</bpmn2:dataInputRefs>
        </bpmn2:inputSet>
        <bpmn2:outputSet id="_dUJ_eD9hEeiZX4h7kLhn_g">
          <bpmn2:dataOutputRefs>_FF877B7D-F76D-4671-98A2-43A814CF2BC5_outputStatusOutputX</bpmn2:dataOutputRefs>
        </bpmn2:outputSet>
      </bpmn2:ioSpecification>
      <bpmn2:dataInputAssociation id="_dUJ_eT9hEeiZX4h7kLhn_g">
        <bpmn2:targetRef>_FF877B7D-F76D-4671-98A2-43A814CF2BC5_TaskNameInputX</bpmn2:targetRef>
        <bpmn2:assignment id="_dUJ_ej9hEeiZX4h7kLhn_g">
          <bpmn2:from xsi:type="bpmn2:tFormalExpression" id="_dUJ_ez9hEeiZX4h7kLhn_g">UserApproval</bpmn2:from>
          <bpmn2:to xsi:type="bpmn2:tFormalExpression" id="_dUJ_fD9hEeiZX4h7kLhn_g">_FF877B7D-F76D-4671-98A2-43A814CF2BC5_TaskNameInputX</bpmn2:to>
        </bpmn2:assignment>
      </bpmn2:dataInputAssociation>
      <bpmn2:dataInputAssociation id="_dUJ_fT9hEeiZX4h7kLhn_g">
        <bpmn2:sourceRef>approvalRequest</bpmn2:sourceRef>
        <bpmn2:targetRef>_FF877B7D-F76D-4671-98A2-43A814CF2BC5_inputRequestInputX</bpmn2:targetRef>
      </bpmn2:dataInputAssociation>
      <bpmn2:dataOutputAssociation id="_dUJ_fj9hEeiZX4h7kLhn_g">
        <bpmn2:sourceRef>_FF877B7D-F76D-4671-98A2-43A814CF2BC5_outputStatusOutputX</bpmn2:sourceRef>
        <bpmn2:targetRef>approvalStatus</bpmn2:targetRef>
      </bpmn2:dataOutputAssociation>
      <bpmn2:script><![CDATA[		String slackAddress = "https://hooks.slack.com/services/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";

		String requestId = serviceName + java.util.UUID.randomUUID();
		String title = String.format("\"%s want to order from catalog %s\"", requesterName, serviceName);
		String body = String.join("\n"
				, "{"
				, "    \"text\": " + title + ","
				, "    \"attachments\":[{"
				, "        \"text\": \"Do you want to approve the request?\","
				, "        \"fallback\": \"Shame... buttons aren't supported in this land\","
				, "        \"callback_id\": \"" + requestId + "\","
				, "        \"color\": \"#3AA3E3\","
				, "        \"attachment_type\": \"default\","
				, "        \"actions\": ["
				, "        {"
				, "            \"name\": \"yes\","
				, "            \"text\": \"Approve\","
				, "            \"type\": \"button\","
				, "            \"value\": \"yes\""
				, "        },"
				, "        {"
				, "            \"name\": \"no\","
				, "            \"text\": \"Deny\","
				, "            \"type\": \"button\","
				, "            \"value\": \"no\""
				, "        }]"
				, "    }]"
				, "}"
		);
		
		java.net.URL url = new java.net.URL(slackAddress);
		java.net.HttpURLConnection conn = (java.net.HttpURLConnection)url.openConnection();
		conn.setDoOutput(true);
		conn.setRequestMethod("POST");
		conn.setRequestProperty("Content-Type", "application/json");
		java.io.OutputStream os = conn.getOutputStream();
		os.write(body.getBytes());
		os.flush();
		
		int responseCode = conn.getResponseCode();
        if (responseCode!= java.net.HttpURLConnection.HTTP_OK) {
            throw new RuntimeException("Failed to send message to slack : " + responseCode);
        }
        conn.disconnect();
        
        //wait to get an approval
        String pollAddress = "http://nodejs-ex-slackapproval.7e14.starter-us-west-2.openshiftapps.com/slack/approval";
        pollAddress += "?requestId=" + requestId;
        url = new java.net.URL(pollAddress);
        boolean finished = false;
        for (int x = 0; x < 100; x++) {
          conn = (java.net.HttpURLConnection) url.openConnection();
          conn.setRequestMethod("GET");
          responseCode = conn.getResponseCode();
          if (responseCode != java.net.HttpURLConnection.HTTP_OK) {
        	    throw new RuntimeException("Failed to poll approval status from http server" + responseCode);
          }
          java.io.BufferedReader in = new java.io.BufferedReader(
                  new java.io.InputStreamReader(conn.getInputStream()));
          String inputLine;
          StringBuffer response = new StringBuffer();
          while ((inputLine = in.readLine()) != null) {
          	response.append(inputLine);
          }
          in.close();
          //print in String
          System.out.println(response.toString());
          //Read JSON response and print
          org.json.JSONObject jsonResponse = new org.json.JSONObject(response.toString());
          String parsedStatus = jsonResponse.getString("approvalStatus");
          if (parsedStatus.equals("Denied") || parsedStatus.equals("Approved")) {
        	    System.out.println("Approval Status: " + parsedStatus);
        	    finished = true;
                kcontext.setVariable("approvalStatus", parsedStatus);
        	    break;
          }
          Thread.sleep(5000);
        }
        if (!finished) {
        	  throw new RuntimeException("Timeout waiting for user approval");
        } ]]></bpmn2:script>
    </bpmn2:scriptTask>
    <bpmn2:sequenceFlow id="_70EAFBD3-AE96-4D01-8CE1-CBA5693274EF" drools:selectable="true" color:background-color="#000000" color:border-color="#000000" color:color="#000000" sourceRef="_50EA3FE4-C792-4BE0-8FBA-00274D1ECAE1" targetRef="_FF877B7D-F76D-4671-98A2-43A814CF2BC5">
      <bpmn2:conditionExpression xsi:type="bpmn2:tFormalExpression" id="_dUJ_fz9hEeiZX4h7kLhn_g" language="http://www.java.com/java"><![CDATA[return approvalRequest.getApprovalMethod() == "Manual";]]></bpmn2:conditionExpression>
    </bpmn2:sequenceFlow>
    <bpmn2:exclusiveGateway id="_F6D5DA3F-0F56-4621-8B63-1FBC209D6E2D" drools:selectable="true" drools:dg="" color:background-color="#f0e68c" color:border-color="#a67f00" color:color="#000000" name="" gatewayDirection="Converging">
      <bpmn2:incoming>_883B0EEB-C528-4DE7-B191-974CC1099130</bpmn2:incoming>
      <bpmn2:incoming>_EB7804B0-7118-400E-BB5F-C8F372D89B27</bpmn2:incoming>
      <bpmn2:outgoing>_5A6EE9D7-A927-4E85-81A7-B67D8D49AC74</bpmn2:outgoing>
    </bpmn2:exclusiveGateway>
    <bpmn2:sequenceFlow id="_883B0EEB-C528-4DE7-B191-974CC1099130" drools:selectable="true" color:background-color="#000000" color:border-color="#000000" color:color="#000000" sourceRef="_FF877B7D-F76D-4671-98A2-43A814CF2BC5" targetRef="_F6D5DA3F-0F56-4621-8B63-1FBC209D6E2D"/>
    <bpmn2:scriptTask id="_A6B334BF-F77B-4E5C-AD59-70A49A084350" drools:selectable="true" color:background-color="#fafad2" color:border-color="#000000" color:color="#000000" name="Initialiazation" scriptFormat="http://www.java.com/java">
      <bpmn2:extensionElements>
        <drools:metaData name="elementname">
          <drools:metaValue><![CDATA[Initialiazation]]></drools:metaValue>
        </drools:metaData>
      </bpmn2:extensionElements>
      <bpmn2:incoming>_7F56DA34-E1CE-46A3-A31F-E1A28930BD00</bpmn2:incoming>
      <bpmn2:outgoing>_CC23BBB4-1F53-4491-9263-C75DEC26C519</bpmn2:outgoing>
      <bpmn2:script><![CDATA[java.lang.String uLabel = (java.lang.String)kcontext.getVariable("userLabel");
java.lang.String sLabel = (java.lang.String)kcontext.getVariable("serviceLabel");
java.lang.String pLabel = (java.lang.String)kcontext.getVariable("projectLabel");
java.lang.String reqName = (java.lang.String)kcontext.getVariable("requesterName");
java.lang.String serName = (java.lang.String)kcontext.getVariable("serviceName");

long pi = kcontext.getProcessInstance().getId();
System.out.println("Process insTANCE ID" + pi);

com.redhat.servicecatlog.ServiceRequest request = new com.redhat.servicecatlog.ServiceRequest();
request.setServiceLabel(sLabel);
request.setProjectLabel(pLabel);
request.setUserLabel(uLabel);
request.setRequestor(reqName);
request.setServiceName(serName);
request.setApprovalMethod("Auto");
kcontext.setVariable("approvalRequest", request);]]></bpmn2:script>
    </bpmn2:scriptTask>
    <bpmn2:sequenceFlow id="_7F56DA34-E1CE-46A3-A31F-E1A28930BD00" drools:selectable="true" color:background-color="#000000" color:border-color="#000000" color:color="#000000" sourceRef="processStartEvent" targetRef="_A6B334BF-F77B-4E5C-AD59-70A49A084350"/>
    <bpmn2:sequenceFlow id="_CC23BBB4-1F53-4491-9263-C75DEC26C519" drools:selectable="true" color:background-color="#000000" color:border-color="#000000" color:color="#000000" sourceRef="_A6B334BF-F77B-4E5C-AD59-70A49A084350" targetRef="_4F0575FD-1ABB-4087-B353-2685994F92BD"/>
    <bpmn2:scriptTask id="_91CA75FA-74A5-41D0-9EE3-F9FFA06D0357" drools:selectable="true" color:background-color="#fafad2" color:border-color="#000000" color:color="#000000" name="QuotaRules" scriptFormat="http://www.java.com/java">
      <bpmn2:extensionElements>
        <drools:metaData name="elementname">
          <drools:metaValue><![CDATA[QuotaRules]]></drools:metaValue>
        </drools:metaData>
      </bpmn2:extensionElements>
      <bpmn2:incoming>_5A6EE9D7-A927-4E85-81A7-B67D8D49AC74</bpmn2:incoming>
      <bpmn2:outgoing>_F0A1EA23-56FB-4689-BB2D-D51EA2069CED</bpmn2:outgoing>
      <bpmn2:script><![CDATA[System.out.println("Firing Quota Rules");]]></bpmn2:script>
    </bpmn2:scriptTask>
    <bpmn2:sequenceFlow id="_5A6EE9D7-A927-4E85-81A7-B67D8D49AC74" drools:selectable="true" color:background-color="#000000" color:border-color="#000000" color:color="#000000" sourceRef="_F6D5DA3F-0F56-4621-8B63-1FBC209D6E2D" targetRef="_91CA75FA-74A5-41D0-9EE3-F9FFA06D0357"/>
    <bpmn2:endEvent id="_6E663A89-E712-45FF-BDFD-2907DB7CCAED" drools:selectable="true" color:background-color="#ff6347" color:border-color="#000000" color:color="#000000" name="">
      <bpmn2:extensionElements>
        <drools:metaData name="elementname">
          <drools:metaValue><![CDATA[]]></drools:metaValue>
        </drools:metaData>
      </bpmn2:extensionElements>
      <bpmn2:incoming>_F0A1EA23-56FB-4689-BB2D-D51EA2069CED</bpmn2:incoming>
    </bpmn2:endEvent>
    <bpmn2:sequenceFlow id="_F0A1EA23-56FB-4689-BB2D-D51EA2069CED" drools:selectable="true" color:background-color="#000000" color:border-color="#000000" color:color="#000000" sourceRef="_91CA75FA-74A5-41D0-9EE3-F9FFA06D0357" targetRef="_6E663A89-E712-45FF-BDFD-2907DB7CCAED"/>
    <bpmn2:sequenceFlow id="_DD4E808B-3000-47F0-82FE-5C22E753BD32" drools:selectable="true" color:background-color="#000000" color:border-color="#000000" color:color="#000000" sourceRef="_50EA3FE4-C792-4BE0-8FBA-00274D1ECAE1" targetRef="_AF599682-40F2-4F64-9944-941E3A29A1E1">
      <bpmn2:conditionExpression xsi:type="bpmn2:tFormalExpression" id="_dUJ_gD9hEeiZX4h7kLhn_g" language="http://www.java.com/java"><![CDATA[return approvalRequest.getApprovalMethod() != "Manual";]]></bpmn2:conditionExpression>
    </bpmn2:sequenceFlow>
    <bpmn2:scriptTask id="_AF599682-40F2-4F64-9944-941E3A29A1E1" drools:selectable="true" color:background-color="#fafad2" color:border-color="#000000" color:color="#000000" name="AutoApproval" scriptFormat="http://www.java.com/java">
      <bpmn2:extensionElements>
        <drools:metaData name="elementname">
          <drools:metaValue><![CDATA[AutoApproval]]></drools:metaValue>
        </drools:metaData>
      </bpmn2:extensionElements>
      <bpmn2:incoming>_DD4E808B-3000-47F0-82FE-5C22E753BD32</bpmn2:incoming>
      <bpmn2:outgoing>_EB7804B0-7118-400E-BB5F-C8F372D89B27</bpmn2:outgoing>
      <bpmn2:script><![CDATA[kcontext.setVariable("approvalStatus", "Approved");]]></bpmn2:script>
    </bpmn2:scriptTask>
    <bpmn2:sequenceFlow id="_EB7804B0-7118-400E-BB5F-C8F372D89B27" drools:selectable="true" color:background-color="#000000" color:border-color="#000000" color:color="#000000" sourceRef="_AF599682-40F2-4F64-9944-941E3A29A1E1" targetRef="_F6D5DA3F-0F56-4621-8B63-1FBC209D6E2D"/>
  </bpmn2:process>
  <bpmndi:BPMNDiagram id="_dUJ_gT9hEeiZX4h7kLhn_g">
    <bpmndi:BPMNPlane id="_dUKmgD9hEeiZX4h7kLhn_g" bpmnElement="apprvoal.ServiceCatalogApproval">
      <bpmndi:BPMNShape id="_dUKmgT9hEeiZX4h7kLhn_g" bpmnElement="processStartEvent">
        <dc:Bounds height="30.0" width="30.0" x="90.0" y="295.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="_dUKmgj9hEeiZX4h7kLhn_g" bpmnElement="_4F0575FD-1ABB-4087-B353-2685994F92BD">
        <dc:Bounds height="80.0" width="100.0" x="315.0" y="270.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="_dUKmgz9hEeiZX4h7kLhn_g" bpmnElement="_50EA3FE4-C792-4BE0-8FBA-00274D1ECAE1">
        <dc:Bounds height="40.0" width="40.0" x="470.0" y="290.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="_dUKmhD9hEeiZX4h7kLhn_g" bpmnElement="_FF877B7D-F76D-4671-98A2-43A814CF2BC5">
        <dc:Bounds height="80.0" width="100.0" x="555.0" y="270.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="_dUKmhT9hEeiZX4h7kLhn_g" bpmnElement="_F6D5DA3F-0F56-4621-8B63-1FBC209D6E2D">
        <dc:Bounds height="40.0" width="40.0" x="700.0" y="290.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="_dUKmhj9hEeiZX4h7kLhn_g" bpmnElement="_A6B334BF-F77B-4E5C-AD59-70A49A084350">
        <dc:Bounds height="80.0" width="100.0" x="165.0" y="270.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="_dUKmhz9hEeiZX4h7kLhn_g" bpmnElement="_91CA75FA-74A5-41D0-9EE3-F9FFA06D0357">
        <dc:Bounds height="80.0" width="100.0" x="780.0" y="270.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="_dUKmiD9hEeiZX4h7kLhn_g" bpmnElement="_6E663A89-E712-45FF-BDFD-2907DB7CCAED">
        <dc:Bounds height="28.0" width="28.0" x="930.0" y="296.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="_dUKmiT9hEeiZX4h7kLhn_g" bpmnElement="_AF599682-40F2-4F64-9944-941E3A29A1E1">
        <dc:Bounds height="80.0" width="100.0" x="555.0" y="150.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="_dUKmij9hEeiZX4h7kLhn_g" bpmnElement="_7225B280-6E01-4585-AC7B-A5FC5534BF24" sourceElement="_dUKmgj9hEeiZX4h7kLhn_g" targetElement="_dUKmgz9hEeiZX4h7kLhn_g">
        <di:waypoint xsi:type="dc:Point" x="365.0" y="310.0"/>
        <di:waypoint xsi:type="dc:Point" x="490.0" y="310.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="_dUKmiz9hEeiZX4h7kLhn_g" bpmnElement="_70EAFBD3-AE96-4D01-8CE1-CBA5693274EF" sourceElement="_dUKmgz9hEeiZX4h7kLhn_g" targetElement="_dUKmhD9hEeiZX4h7kLhn_g">
        <di:waypoint xsi:type="dc:Point" x="490.0" y="310.0"/>
        <di:waypoint xsi:type="dc:Point" x="605.0" y="310.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="_dUKmjD9hEeiZX4h7kLhn_g" bpmnElement="_883B0EEB-C528-4DE7-B191-974CC1099130" sourceElement="_dUKmhD9hEeiZX4h7kLhn_g" targetElement="_dUKmhT9hEeiZX4h7kLhn_g">
        <di:waypoint xsi:type="dc:Point" x="605.0" y="310.0"/>
        <di:waypoint xsi:type="dc:Point" x="720.0" y="310.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="_dUKmjT9hEeiZX4h7kLhn_g" bpmnElement="_7F56DA34-E1CE-46A3-A31F-E1A28930BD00" sourceElement="_dUKmgT9hEeiZX4h7kLhn_g" targetElement="_dUKmhj9hEeiZX4h7kLhn_g">
        <di:waypoint xsi:type="dc:Point" x="105.0" y="310.0"/>
        <di:waypoint xsi:type="dc:Point" x="215.0" y="310.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="_dUKmjj9hEeiZX4h7kLhn_g" bpmnElement="_CC23BBB4-1F53-4491-9263-C75DEC26C519" sourceElement="_dUKmhj9hEeiZX4h7kLhn_g" targetElement="_dUKmgj9hEeiZX4h7kLhn_g">
        <di:waypoint xsi:type="dc:Point" x="215.0" y="310.0"/>
        <di:waypoint xsi:type="dc:Point" x="365.0" y="310.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="_dUKmjz9hEeiZX4h7kLhn_g" bpmnElement="_5A6EE9D7-A927-4E85-81A7-B67D8D49AC74" sourceElement="_dUKmhT9hEeiZX4h7kLhn_g" targetElement="_dUKmhz9hEeiZX4h7kLhn_g">
        <di:waypoint xsi:type="dc:Point" x="720.0" y="310.0"/>
        <di:waypoint xsi:type="dc:Point" x="830.0" y="310.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="_dUKmkD9hEeiZX4h7kLhn_g" bpmnElement="_F0A1EA23-56FB-4689-BB2D-D51EA2069CED" sourceElement="_dUKmhz9hEeiZX4h7kLhn_g" targetElement="_dUKmiD9hEeiZX4h7kLhn_g">
        <di:waypoint xsi:type="dc:Point" x="830.0" y="310.0"/>
        <di:waypoint xsi:type="dc:Point" x="944.0" y="310.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="_dUKmkT9hEeiZX4h7kLhn_g" bpmnElement="_DD4E808B-3000-47F0-82FE-5C22E753BD32" sourceElement="_dUKmgz9hEeiZX4h7kLhn_g" targetElement="_dUKmiT9hEeiZX4h7kLhn_g">
        <di:waypoint xsi:type="dc:Point" x="490.0" y="310.0"/>
        <di:waypoint xsi:type="dc:Point" x="490.0" y="190.0"/>
        <di:waypoint xsi:type="dc:Point" x="605.0" y="190.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="_dUKmkj9hEeiZX4h7kLhn_g" bpmnElement="_EB7804B0-7118-400E-BB5F-C8F372D89B27" sourceElement="_dUKmiT9hEeiZX4h7kLhn_g" targetElement="_dUKmhT9hEeiZX4h7kLhn_g">
        <di:waypoint xsi:type="dc:Point" x="605.0" y="190.0"/>
        <di:waypoint xsi:type="dc:Point" x="722.0" y="190.0"/>
        <di:waypoint xsi:type="dc:Point" x="720.0" y="310.0"/>
      </bpmndi:BPMNEdge>
    </bpmndi:BPMNPlane>
  </bpmndi:BPMNDiagram>
  <bpmn2:relationship id="_dUKmkz9hEeiZX4h7kLhn_g" type="BPSimData">
    <bpmn2:extensionElements>
      <bpsim:BPSimData>
        <bpsim:Scenario xsi:type="bpsim:Scenario" id="default" name="Simulationscenario">
          <bpsim:ScenarioParameters xsi:type="bpsim:ScenarioParameters" baseTimeUnit="min"/>
          <bpsim:ElementParameters xsi:type="bpsim:ElementParameters" elementRef="_70EAFBD3-AE96-4D01-8CE1-CBA5693274EF" id="_dUKmlD9hEeiZX4h7kLhn_g">
            <bpsim:ControlParameters xsi:type="bpsim:ControlParameters">
              <bpsim:Probability xsi:type="bpsim:Parameter">
                <bpsim:FloatingParameter value="50.0"/>
              </bpsim:Probability>
            </bpsim:ControlParameters>
          </bpsim:ElementParameters>
          <bpsim:ElementParameters xsi:type="bpsim:ElementParameters" elementRef="_883B0EEB-C528-4DE7-B191-974CC1099130" id="_dUKmlT9hEeiZX4h7kLhn_g">
            <bpsim:ControlParameters xsi:type="bpsim:ControlParameters">
              <bpsim:Probability xsi:type="bpsim:Parameter">
                <bpsim:FloatingParameter value="100.0"/>
              </bpsim:Probability>
            </bpsim:ControlParameters>
          </bpsim:ElementParameters>
          <bpsim:ElementParameters xsi:type="bpsim:ElementParameters" elementRef="_EB7804B0-7118-400E-BB5F-C8F372D89B27" id="_dUKmlj9hEeiZX4h7kLhn_g">
            <bpsim:ControlParameters xsi:type="bpsim:ControlParameters">
              <bpsim:Probability xsi:type="bpsim:Parameter">
                <bpsim:FloatingParameter value="100.0"/>
              </bpsim:Probability>
            </bpsim:ControlParameters>
          </bpsim:ElementParameters>
          <bpsim:ElementParameters xsi:type="bpsim:ElementParameters" elementRef="_FF877B7D-F76D-4671-98A2-43A814CF2BC5" id="_dUKmlz9hEeiZX4h7kLhn_g">
            <bpsim:TimeParameters xsi:type="bpsim:TimeParameters">
              <bpsim:ProcessingTime xsi:type="bpsim:Parameter">
                <bpsim:UniformDistribution max="10.0" min="5.0"/>
              </bpsim:ProcessingTime>
            </bpsim:TimeParameters>
            <bpsim:CostParameters xsi:type="bpsim:CostParameters">
              <bpsim:UnitCost xsi:type="bpsim:Parameter">
                <bpsim:FloatingParameter value="0.0"/>
              </bpsim:UnitCost>
            </bpsim:CostParameters>
          </bpsim:ElementParameters>
          <bpsim:ElementParameters xsi:type="bpsim:ElementParameters" elementRef="_7F56DA34-E1CE-46A3-A31F-E1A28930BD00" id="_dUKmmD9hEeiZX4h7kLhn_g">
            <bpsim:ControlParameters xsi:type="bpsim:ControlParameters">
              <bpsim:Probability xsi:type="bpsim:Parameter">
                <bpsim:FloatingParameter value="100.0"/>
              </bpsim:Probability>
            </bpsim:ControlParameters>
          </bpsim:ElementParameters>
          <bpsim:ElementParameters xsi:type="bpsim:ElementParameters" elementRef="_F0A1EA23-56FB-4689-BB2D-D51EA2069CED" id="_dUKmmT9hEeiZX4h7kLhn_g">
            <bpsim:ControlParameters xsi:type="bpsim:ControlParameters">
              <bpsim:Probability xsi:type="bpsim:Parameter">
                <bpsim:FloatingParameter value="100.0"/>
              </bpsim:Probability>
            </bpsim:ControlParameters>
          </bpsim:ElementParameters>
          <bpsim:ElementParameters xsi:type="bpsim:ElementParameters" elementRef="_6E663A89-E712-45FF-BDFD-2907DB7CCAED" id="_dUKmmj9hEeiZX4h7kLhn_g">
            <bpsim:TimeParameters xsi:type="bpsim:TimeParameters">
              <bpsim:ProcessingTime xsi:type="bpsim:Parameter">
                <bpsim:UniformDistribution max="10.0" min="5.0"/>
              </bpsim:ProcessingTime>
            </bpsim:TimeParameters>
          </bpsim:ElementParameters>
          <bpsim:ElementParameters xsi:type="bpsim:ElementParameters" elementRef="processStartEvent" id="_dUKmmz9hEeiZX4h7kLhn_g">
            <bpsim:TimeParameters xsi:type="bpsim:TimeParameters">
              <bpsim:ProcessingTime xsi:type="bpsim:Parameter">
                <bpsim:UniformDistribution max="10.0" min="5.0"/>
              </bpsim:ProcessingTime>
            </bpsim:TimeParameters>
            <bpsim:ControlParameters xsi:type="bpsim:ControlParameters">
              <bpsim:Probability xsi:type="bpsim:Parameter">
                <bpsim:FloatingParameter value="100.0"/>
              </bpsim:Probability>
            </bpsim:ControlParameters>
          </bpsim:ElementParameters>
          <bpsim:ElementParameters xsi:type="bpsim:ElementParameters" elementRef="_A6B334BF-F77B-4E5C-AD59-70A49A084350" id="_dUKmnD9hEeiZX4h7kLhn_g">
            <bpsim:TimeParameters xsi:type="bpsim:TimeParameters">
              <bpsim:ProcessingTime xsi:type="bpsim:Parameter">
                <bpsim:UniformDistribution max="10.0" min="5.0"/>
              </bpsim:ProcessingTime>
            </bpsim:TimeParameters>
            <bpsim:CostParameters xsi:type="bpsim:CostParameters">
              <bpsim:UnitCost xsi:type="bpsim:Parameter">
                <bpsim:FloatingParameter value="0.0"/>
              </bpsim:UnitCost>
            </bpsim:CostParameters>
          </bpsim:ElementParameters>
          <bpsim:ElementParameters xsi:type="bpsim:ElementParameters" elementRef="_5A6EE9D7-A927-4E85-81A7-B67D8D49AC74" id="_dUKmnT9hEeiZX4h7kLhn_g">
            <bpsim:ControlParameters xsi:type="bpsim:ControlParameters">
              <bpsim:Probability xsi:type="bpsim:Parameter">
                <bpsim:FloatingParameter value="100.0"/>
              </bpsim:Probability>
            </bpsim:ControlParameters>
          </bpsim:ElementParameters>
          <bpsim:ElementParameters xsi:type="bpsim:ElementParameters" elementRef="_4F0575FD-1ABB-4087-B353-2685994F92BD" id="_dUKmnj9hEeiZX4h7kLhn_g">
            <bpsim:TimeParameters xsi:type="bpsim:TimeParameters">
              <bpsim:ProcessingTime xsi:type="bpsim:Parameter">
                <bpsim:UniformDistribution max="10.0" min="5.0"/>
              </bpsim:ProcessingTime>
            </bpsim:TimeParameters>
            <bpsim:CostParameters xsi:type="bpsim:CostParameters">
              <bpsim:UnitCost xsi:type="bpsim:Parameter">
                <bpsim:FloatingParameter value="0.0"/>
              </bpsim:UnitCost>
            </bpsim:CostParameters>
          </bpsim:ElementParameters>
          <bpsim:ElementParameters xsi:type="bpsim:ElementParameters" elementRef="_91CA75FA-74A5-41D0-9EE3-F9FFA06D0357" id="_dUKmnz9hEeiZX4h7kLhn_g">
            <bpsim:TimeParameters xsi:type="bpsim:TimeParameters">
              <bpsim:ProcessingTime xsi:type="bpsim:Parameter">
                <bpsim:UniformDistribution max="10.0" min="5.0"/>
              </bpsim:ProcessingTime>
            </bpsim:TimeParameters>
            <bpsim:CostParameters xsi:type="bpsim:CostParameters">
              <bpsim:UnitCost xsi:type="bpsim:Parameter">
                <bpsim:FloatingParameter value="0.0"/>
              </bpsim:UnitCost>
            </bpsim:CostParameters>
          </bpsim:ElementParameters>
          <bpsim:ElementParameters xsi:type="bpsim:ElementParameters" elementRef="_CC23BBB4-1F53-4491-9263-C75DEC26C519" id="_dUKmoD9hEeiZX4h7kLhn_g">
            <bpsim:ControlParameters xsi:type="bpsim:ControlParameters">
              <bpsim:Probability xsi:type="bpsim:Parameter">
                <bpsim:FloatingParameter value="100.0"/>
              </bpsim:Probability>
            </bpsim:ControlParameters>
          </bpsim:ElementParameters>
          <bpsim:ElementParameters xsi:type="bpsim:ElementParameters" elementRef="_7225B280-6E01-4585-AC7B-A5FC5534BF24" id="_dUKmoT9hEeiZX4h7kLhn_g">
            <bpsim:ControlParameters xsi:type="bpsim:ControlParameters">
              <bpsim:Probability xsi:type="bpsim:Parameter">
                <bpsim:FloatingParameter value="100.0"/>
              </bpsim:Probability>
            </bpsim:ControlParameters>
          </bpsim:ElementParameters>
          <bpsim:ElementParameters xsi:type="bpsim:ElementParameters" elementRef="_AF599682-40F2-4F64-9944-941E3A29A1E1" id="_dUKmoj9hEeiZX4h7kLhn_g">
            <bpsim:TimeParameters xsi:type="bpsim:TimeParameters">
              <bpsim:ProcessingTime xsi:type="bpsim:Parameter">
                <bpsim:UniformDistribution max="10.0" min="5.0"/>
              </bpsim:ProcessingTime>
            </bpsim:TimeParameters>
            <bpsim:CostParameters xsi:type="bpsim:CostParameters">
              <bpsim:UnitCost xsi:type="bpsim:Parameter">
                <bpsim:FloatingParameter value="0.0"/>
              </bpsim:UnitCost>
            </bpsim:CostParameters>
          </bpsim:ElementParameters>
          <bpsim:ElementParameters xsi:type="bpsim:ElementParameters" elementRef="_DD4E808B-3000-47F0-82FE-5C22E753BD32" id="_dUKmoz9hEeiZX4h7kLhn_g">
            <bpsim:ControlParameters xsi:type="bpsim:ControlParameters">
              <bpsim:Probability xsi:type="bpsim:Parameter">
                <bpsim:FloatingParameter value="50.0"/>
              </bpsim:Probability>
            </bpsim:ControlParameters>
          </bpsim:ElementParameters>
        </bpsim:Scenario>
      </bpsim:BPSimData>
    </bpmn2:extensionElements>
    <bpmn2:source>_dUJ_cD9hEeiZX4h7kLhn_g</bpmn2:source>
    <bpmn2:target>_dUJ_cD9hEeiZX4h7kLhn_g</bpmn2:target>
  </bpmn2:relationship>
</bpmn2:definitions>
