<?xml version="1.0" encoding="UTF-8"?>
<bpmn2:definitions xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://www.omg.org/bpmn20" xmlns:bpmn2="http://www.omg.org/spec/BPMN/20100524/MODEL" xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI" xmlns:bpsim="http://www.bpsim.org/schemas/1.0" xmlns:color="http://www.omg.org/spec/BPMN/non-normative/color" xmlns:dc="http://www.omg.org/spec/DD/20100524/DC" xmlns:di="http://www.omg.org/spec/DD/20100524/DI" xmlns:drools="http://www.jboss.org/drools" id="_AyztIE57EeiM2dG-KVIVyw" xsi:schemaLocation="http://www.omg.org/spec/BPMN/20100524/MODEL BPMN20.xsd http://www.jboss.org/drools drools.xsd http://www.bpsim.org/schemas/1.0 bpsim.xsd" exporter="jBPM Designer" exporterVersion="6.2.0" expressionLanguage="http://www.mvel.org/2.0" targetNamespace="http://www.omg.org/bpmn20" typeLanguage="http://www.java.com/javaTypes">
  <bpmn2:itemDefinition id="_serviceRequestItem" structureRef="com.redhat.servicecatlog.ServiceRequest"/>
  <bpmn2:itemDefinition id="__4F0575FD-1ABB-4087-B353-2685994F92BD_requestFactInputXItem" structureRef="com.redhat.servicecatlog.ServiceRequest"/>
  <bpmn2:itemDefinition id="__4F0575FD-1ABB-4087-B353-2685994F92BD_requestFactOutputXItem" structureRef="com.redhat.servicecatlog.ServiceRequest"/>
  <bpmn2:itemDefinition id="__91CA75FA-74A5-41D0-9EE3-F9FFA06D0357_InputServiceRequestInputXItem" structureRef="com.redhat.servicecatlog.ServiceRequest"/>
  <bpmn2:process id="approval" drools:packageName="org.jbpm" drools:version="1.0" name="ServiceCatalogApproval">
    <bpmn2:property id="serviceRequest" itemSubjectRef="_serviceRequestItem"/>
    <bpmn2:startEvent id="processStartEvent" drools:selectable="true" color:background-color="#9acd32" color:border-color="#000000" color:color="#000000" name="">
      <bpmn2:extensionElements>
        <drools:metaData name="elementname">
          <drools:metaValue><![CDATA[]]></drools:metaValue>
        </drools:metaData>
      </bpmn2:extensionElements>
      <bpmn2:outgoing>_7F56DA34-E1CE-46A3-A31F-E1A28930BD00</bpmn2:outgoing>
    </bpmn2:startEvent>
    <bpmn2:businessRuleTask id="_4F0575FD-1ABB-4087-B353-2685994F92BD" drools:selectable="true" drools:ruleFlowGroup="approval_group" drools:scriptFormat="http://www.java.com/java" color:background-color="#fafad2" color:border-color="#000000" color:color="#000000" name="ApprovalRules">
      <bpmn2:extensionElements>
        <drools:metaData name="elementname">
          <drools:metaValue><![CDATA[ApprovalRules]]></drools:metaValue>
        </drools:metaData>
      </bpmn2:extensionElements>
      <bpmn2:incoming>_CC23BBB4-1F53-4491-9263-C75DEC26C519</bpmn2:incoming>
      <bpmn2:outgoing>_7225B280-6E01-4585-AC7B-A5FC5534BF24</bpmn2:outgoing>
      <bpmn2:ioSpecification id="_AyztIU57EeiM2dG-KVIVyw">
        <bpmn2:dataInput id="_4F0575FD-1ABB-4087-B353-2685994F92BD_requestFactInputX" drools:dtype="com.redhat.servicecatlog.ServiceRequest" itemSubjectRef="__4F0575FD-1ABB-4087-B353-2685994F92BD_requestFactInputXItem" name="requestFact"/>
        <bpmn2:dataOutput id="_4F0575FD-1ABB-4087-B353-2685994F92BD_requestFactOutputX" drools:dtype="com.redhat.servicecatlog.ServiceRequest" itemSubjectRef="__4F0575FD-1ABB-4087-B353-2685994F92BD_requestFactOutputXItem" name="requestFact"/>
        <bpmn2:inputSet id="_AyztIk57EeiM2dG-KVIVyw">
          <bpmn2:dataInputRefs>_4F0575FD-1ABB-4087-B353-2685994F92BD_requestFactInputX</bpmn2:dataInputRefs>
        </bpmn2:inputSet>
        <bpmn2:outputSet id="_AyztI057EeiM2dG-KVIVyw">
          <bpmn2:dataOutputRefs>_4F0575FD-1ABB-4087-B353-2685994F92BD_requestFactOutputX</bpmn2:dataOutputRefs>
        </bpmn2:outputSet>
      </bpmn2:ioSpecification>
      <bpmn2:dataInputAssociation id="_AyztJE57EeiM2dG-KVIVyw">
        <bpmn2:sourceRef>serviceRequest</bpmn2:sourceRef>
        <bpmn2:targetRef>_4F0575FD-1ABB-4087-B353-2685994F92BD_requestFactInputX</bpmn2:targetRef>
      </bpmn2:dataInputAssociation>
      <bpmn2:dataOutputAssociation id="_AyztJU57EeiM2dG-KVIVyw">
        <bpmn2:sourceRef>_4F0575FD-1ABB-4087-B353-2685994F92BD_requestFactOutputX</bpmn2:sourceRef>
        <bpmn2:targetRef>serviceRequest</bpmn2:targetRef>
      </bpmn2:dataOutputAssociation>
    </bpmn2:businessRuleTask>
    <bpmn2:exclusiveGateway id="_50EA3FE4-C792-4BE0-8FBA-00274D1ECAE1" drools:selectable="true" drools:dg="" color:background-color="#f0e68c" color:border-color="#a67f00" color:color="#000000" name="" gatewayDirection="Diverging">
      <bpmn2:incoming>_7225B280-6E01-4585-AC7B-A5FC5534BF24</bpmn2:incoming>
      <bpmn2:outgoing>_70EAFBD3-AE96-4D01-8CE1-CBA5693274EF</bpmn2:outgoing>
      <bpmn2:outgoing>_DD4E808B-3000-47F0-82FE-5C22E753BD32</bpmn2:outgoing>
    </bpmn2:exclusiveGateway>
    <bpmn2:sequenceFlow id="_7225B280-6E01-4585-AC7B-A5FC5534BF24" drools:selectable="true" color:background-color="#000000" color:border-color="#000000" color:color="#000000" sourceRef="_4F0575FD-1ABB-4087-B353-2685994F92BD" targetRef="_50EA3FE4-C792-4BE0-8FBA-00274D1ECAE1"/>
    <bpmn2:sequenceFlow id="_70EAFBD3-AE96-4D01-8CE1-CBA5693274EF" drools:selectable="true" color:background-color="#000000" color:border-color="#000000" color:color="#000000" sourceRef="_50EA3FE4-C792-4BE0-8FBA-00274D1ECAE1" targetRef="_B9BC65A6-BE7A-4AAF-8228-09A14A7B036A">
      <bpmn2:conditionExpression xsi:type="bpmn2:tFormalExpression" id="_AyztJk57EeiM2dG-KVIVyw" language="http://www.java.com/java"><![CDATA[return serviceRequest.getApprovalMethod() == "Manual" && !serviceRequest.getApprovers().isEmpty();]]></bpmn2:conditionExpression>
    </bpmn2:sequenceFlow>
    <bpmn2:exclusiveGateway id="_F6D5DA3F-0F56-4621-8B63-1FBC209D6E2D" drools:selectable="true" drools:dg="" color:background-color="#f0e68c" color:border-color="#a67f00" color:color="#000000" name="" gatewayDirection="Converging">
      <bpmn2:incoming>_CA1DBDAF-7994-4A57-9193-AC6283E4A294</bpmn2:incoming>
      <bpmn2:incoming>_DD4E808B-3000-47F0-82FE-5C22E753BD32</bpmn2:incoming>
      <bpmn2:outgoing>_39EE2C99-186C-4CD6-83BD-ED5F26ACBF59</bpmn2:outgoing>
    </bpmn2:exclusiveGateway>
    <bpmn2:scriptTask id="_A6B334BF-F77B-4E5C-AD59-70A49A084350" drools:selectable="true" color:background-color="#fafad2" color:border-color="#000000" color:color="#000000" name="Initialiazation" scriptFormat="http://www.java.com/java">
      <bpmn2:extensionElements>
        <drools:metaData name="elementname">
          <drools:metaValue><![CDATA[Initialiazation]]></drools:metaValue>
        </drools:metaData>
      </bpmn2:extensionElements>
      <bpmn2:incoming>_7F56DA34-E1CE-46A3-A31F-E1A28930BD00</bpmn2:incoming>
      <bpmn2:outgoing>_CC23BBB4-1F53-4491-9263-C75DEC26C519</bpmn2:outgoing>
      <bpmn2:script><![CDATA[	long pi = kcontext.getProcessInstance().getId();
	System.out.println("Process instance ID" + pi);

	com.redhat.servicecatlog.ServiceRequest request =
	  new com.redhat.servicecatlog.ServiceRequest();
	request.setServiceLabel((String)kcontext.getVariable("service_label"));
	request.setProjectLabel((String)kcontext.getVariable("project_label"));
	request.setUserLabel((String)kcontext.getVariable("user_label"));
	request.setRequester((String)kcontext.getVariable("requester"));
	request.setServiceName((String)kcontext.getVariable("service_name"));

	com.redhat.servicecatlog.RequestItem item =
	  new com.redhat.servicecatlog.RequestItem();
	item.setRequestedCpus(Integer.parseInt((String)kcontext.getVariable("requested_cpus")));
	item.setRequestedVms(Integer.parseInt((String)kcontext.getVariable("requested_vms")));
	item.setRequestedStorages(Integer.parseInt((String)kcontext.getVariable("requested_storage_gb")));
	item.setRequestedMemories(Integer.parseInt((String)kcontext.getVariable("requested_memory_gb")));
	item.setRequestedBudget(Double.parseDouble((String)kcontext.getVariable("requested_budget")));

	item.setAllocatedCpus(Integer.parseInt((String)kcontext.getVariable("allocated_cpus")));
	item.setAllocatedVms(Integer.parseInt((String)kcontext.getVariable("allocated_vms")));
	item.setAllocatedStorages(Integer.parseInt((String)kcontext.getVariable("allocated_storage_gb")));
	item.setAllocatedMemories(Integer.parseInt((String)kcontext.getVariable("allocated_memory_gb")));
	item.setAllocatedBudget(Double.parseDouble((String)kcontext.getVariable("allocated_budget")));
	
	item.setUsedCpus(Integer.parseInt((String)kcontext.getVariable("used_cpus")));
	item.setUsedVms(Integer.parseInt((String)kcontext.getVariable("used_vms")));
	item.setUsedStorages(Integer.parseInt((String)kcontext.getVariable("used_storage_gb")));
	item.setUsedMemories(Integer.parseInt((String)kcontext.getVariable("used_memory_gb")));
	item.setUsedBudget(Double.parseDouble((String)kcontext.getVariable("used_budget")));
	request.setItem(item);

	int numApprovers = Integer.parseInt((String)kcontext.getVariable("num_approvers"));
	java.util.List<com.redhat.servicecatlog.Approver> approvers = 
			new java.util.ArrayList<com.redhat.servicecatlog.Approver>();
	for (int i = 1; i <= numApprovers; i++)
	{
		com.redhat.servicecatlog.Approver man = new com.redhat.servicecatlog.Approver();
		man.setName((String)kcontext.getVariable("approver_"+i+"_name"));
		man.setSlackAddress((String)kcontext.getVariable("approver_"+i+"_url"));
        approvers.add(man);
	}
	request.setApprovers(approvers);
	request.setActiveIndex(0);
	request.setApprovalStatus("Approved");
	request.setApprovalMethod("Auto");
	
	if (kcontext.getVariable("quota_approver_name") != null) {
		com.redhat.servicecatlog.Approver quotaApprover = 
				new com.redhat.servicecatlog.Approver();
		quotaApprover.setName((String)kcontext.getVariable("quota_approver_name"));
		quotaApprover.setSlackAddress((String)kcontext.getVariable("quota_approver_url"));
		request.setQuotaApprover(quotaApprover);
	}
	
	kcontext.setVariable("serviceRequest", request);	
	System.out.println("Initialization completed");]]></bpmn2:script>
    </bpmn2:scriptTask>
    <bpmn2:sequenceFlow id="_7F56DA34-E1CE-46A3-A31F-E1A28930BD00" drools:selectable="true" color:background-color="#000000" color:border-color="#000000" color:color="#000000" sourceRef="processStartEvent" targetRef="_A6B334BF-F77B-4E5C-AD59-70A49A084350"/>
    <bpmn2:sequenceFlow id="_CC23BBB4-1F53-4491-9263-C75DEC26C519" drools:selectable="true" color:background-color="#000000" color:border-color="#000000" color:color="#000000" sourceRef="_A6B334BF-F77B-4E5C-AD59-70A49A084350" targetRef="_4F0575FD-1ABB-4087-B353-2685994F92BD"/>
    <bpmn2:businessRuleTask id="_91CA75FA-74A5-41D0-9EE3-F9FFA06D0357" drools:selectable="true" drools:ruleFlowGroup="quota_group" drools:scriptFormat="http://www.java.com/java" color:background-color="#fafad2" color:border-color="#000000" color:color="#000000" name="QuotaRules">
      <bpmn2:extensionElements>
        <drools:metaData name="elementname">
          <drools:metaValue><![CDATA[QuotaRules]]></drools:metaValue>
        </drools:metaData>
        <drools:onExit-script scriptFormat="http://www.java.com/java">
          <drools:script><![CDATA[



]]></drools:script>
        </drools:onExit-script>
      </bpmn2:extensionElements>
      <bpmn2:incoming>_18A65292-92A0-4162-A5BF-EB33F861E263</bpmn2:incoming>
      <bpmn2:outgoing>_B472D834-5411-4C2E-A267-E27ABB41F329</bpmn2:outgoing>
      <bpmn2:ioSpecification id="_AyztJ057EeiM2dG-KVIVyw">
        <bpmn2:dataInput id="_91CA75FA-74A5-41D0-9EE3-F9FFA06D0357_InputServiceRequestInputX" drools:dtype="com.redhat.servicecatlog.ServiceRequest" itemSubjectRef="__91CA75FA-74A5-41D0-9EE3-F9FFA06D0357_InputServiceRequestInputXItem" name="InputServiceRequest"/>
        <bpmn2:inputSet id="_AyztKE57EeiM2dG-KVIVyw">
          <bpmn2:dataInputRefs>_91CA75FA-74A5-41D0-9EE3-F9FFA06D0357_InputServiceRequestInputX</bpmn2:dataInputRefs>
        </bpmn2:inputSet>
        <bpmn2:outputSet id="_AyztKU57EeiM2dG-KVIVyw"/>
      </bpmn2:ioSpecification>
      <bpmn2:dataInputAssociation id="_AyztKk57EeiM2dG-KVIVyw">
        <bpmn2:sourceRef>serviceRequest</bpmn2:sourceRef>
        <bpmn2:targetRef>_91CA75FA-74A5-41D0-9EE3-F9FFA06D0357_InputServiceRequestInputX</bpmn2:targetRef>
      </bpmn2:dataInputAssociation>
    </bpmn2:businessRuleTask>
    <bpmn2:endEvent id="_6E663A89-E712-45FF-BDFD-2907DB7CCAED" drools:selectable="true" color:background-color="#ff6347" color:border-color="#000000" color:color="#000000" name="">
      <bpmn2:extensionElements>
        <drools:metaData name="elementname">
          <drools:metaValue><![CDATA[]]></drools:metaValue>
        </drools:metaData>
      </bpmn2:extensionElements>
      <bpmn2:incoming>_BBB2B814-690C-4C4E-8F54-53C209B73E97</bpmn2:incoming>
    </bpmn2:endEvent>
    <bpmn2:sequenceFlow id="_DD4E808B-3000-47F0-82FE-5C22E753BD32" drools:selectable="true" color:background-color="#000000" color:border-color="#000000" color:color="#000000" sourceRef="_50EA3FE4-C792-4BE0-8FBA-00274D1ECAE1" targetRef="_F6D5DA3F-0F56-4621-8B63-1FBC209D6E2D">
      <bpmn2:conditionExpression xsi:type="bpmn2:tFormalExpression" id="_AyztK057EeiM2dG-KVIVyw" language="http://www.java.com/java"><![CDATA[return serviceRequest.getApprovalMethod() != "Manual" || serviceRequest.getApprovers().isEmpty();]]></bpmn2:conditionExpression>
    </bpmn2:sequenceFlow>
    <bpmn2:sequenceFlow id="_04D5E1EE-BAC9-495D-913F-1CB1B0AFA7E1" drools:selectable="true" color:background-color="#000000" color:border-color="#000000" color:color="#000000" sourceRef="_26C43A82-EC25-4941-A89A-123736556935" targetRef="_94547BB4-ED2C-496E-8A2C-F2C2F24DFEB6"/>
    <bpmn2:exclusiveGateway id="_B9BC65A6-BE7A-4AAF-8228-09A14A7B036A" drools:selectable="true" drools:dg="" color:background-color="#f0e68c" color:border-color="#a67f00" color:color="#000000" name="" gatewayDirection="Converging">
      <bpmn2:incoming>_70EAFBD3-AE96-4D01-8CE1-CBA5693274EF</bpmn2:incoming>
      <bpmn2:incoming>_FDC2EFF2-4086-43F3-9BA9-84355186C8FA</bpmn2:incoming>
      <bpmn2:outgoing>_776BFFA0-E189-4DBD-8AFE-659C02892681</bpmn2:outgoing>
    </bpmn2:exclusiveGateway>
    <bpmn2:scriptTask id="_26C43A82-EC25-4941-A89A-123736556935" drools:selectable="true" color:background-color="#fafad2" color:border-color="#000000" color:color="#000000" name="SendSlack" scriptFormat="http://www.java.com/java">
      <bpmn2:extensionElements>
        <drools:metaData name="elementname">
          <drools:metaValue><![CDATA[SendSlack]]></drools:metaValue>
        </drools:metaData>
        <drools:metaData name="customAsync">
          <drools:metaValue><![CDATA[true]]></drools:metaValue>
        </drools:metaData>
      </bpmn2:extensionElements>
      <bpmn2:incoming>_776BFFA0-E189-4DBD-8AFE-659C02892681</bpmn2:incoming>
      <bpmn2:outgoing>_04D5E1EE-BAC9-495D-913F-1CB1B0AFA7E1</bpmn2:outgoing>
      <bpmn2:script><![CDATA[	com.redhat.servicecatlog.ServiceRequest request = (com.redhat.servicecatlog.ServiceRequest)kcontext.getVariable("serviceRequest");
	com.redhat.servicecatlog.Approver approver = request.getApprovers().get(request.getActiveIndex());
	approver.notifySlack(request.getRequester(), request.getServiceName(), request.getItem().toString());
	int seq = request.getActiveIndex() + 1;
	kcontext.setVariable("approver_" + seq + "_status", approver.getStatus());
	kcontext.setVariable("approver_" + seq + "_initiated_at", approver.getNotifyTime());
]]></bpmn2:script>
    </bpmn2:scriptTask>
    <bpmn2:scriptTask id="_94547BB4-ED2C-496E-8A2C-F2C2F24DFEB6" drools:selectable="true" color:background-color="#fafad2" color:border-color="#000000" color:color="#000000" name="WaitSlack" scriptFormat="http://www.java.com/java">
      <bpmn2:extensionElements>
        <drools:metaData name="elementname">
          <drools:metaValue><![CDATA[WaitSlack]]></drools:metaValue>
        </drools:metaData>
        <drools:metaData name="customAsync">
          <drools:metaValue><![CDATA[true]]></drools:metaValue>
        </drools:metaData>
      </bpmn2:extensionElements>
      <bpmn2:incoming>_04D5E1EE-BAC9-495D-913F-1CB1B0AFA7E1</bpmn2:incoming>
      <bpmn2:outgoing>_1C3DB779-C303-4D2A-A294-0F31925585BC</bpmn2:outgoing>
      <bpmn2:script><![CDATA[	com.redhat.servicecatlog.ServiceRequest request = (com.redhat.servicecatlog.ServiceRequest)kcontext.getVariable("serviceRequest");
	com.redhat.servicecatlog.Approver approver = request.getApprovers().get(request.getActiveIndex());
	approver.waitForAction((String)kcontext.getVariable("slack_proxy_server"));
	int seq = request.getActiveIndex() + 1;
	request.setActiveIndex(seq);
	kcontext.setVariable("approver_" + seq + "_status", approver.getStatus());
	kcontext.setVariable("approver_" + seq + "_approved_at", approver.getActionTime());
	if (approver.getStatus().equals("Denied")) {
	  request.setApprovalStatus("Denied");
	}]]></bpmn2:script>
    </bpmn2:scriptTask>
    <bpmn2:exclusiveGateway id="_7C48F8D4-0621-45FD-A717-A6124F54F0EE" drools:selectable="true" drools:dg="" color:background-color="#f0e68c" color:border-color="#a67f00" color:color="#000000" name="" gatewayDirection="Diverging">
      <bpmn2:incoming>_1C3DB779-C303-4D2A-A294-0F31925585BC</bpmn2:incoming>
      <bpmn2:outgoing>_FDC2EFF2-4086-43F3-9BA9-84355186C8FA</bpmn2:outgoing>
      <bpmn2:outgoing>_CA1DBDAF-7994-4A57-9193-AC6283E4A294</bpmn2:outgoing>
    </bpmn2:exclusiveGateway>
    <bpmn2:sequenceFlow id="_1C3DB779-C303-4D2A-A294-0F31925585BC" drools:selectable="true" color:background-color="#000000" color:border-color="#000000" color:color="#000000" sourceRef="_94547BB4-ED2C-496E-8A2C-F2C2F24DFEB6" targetRef="_7C48F8D4-0621-45FD-A717-A6124F54F0EE"/>
    <bpmn2:sequenceFlow id="_FDC2EFF2-4086-43F3-9BA9-84355186C8FA" drools:selectable="true" color:background-color="#000000" color:border-color="#000000" color:color="#000000" sourceRef="_7C48F8D4-0621-45FD-A717-A6124F54F0EE" targetRef="_B9BC65A6-BE7A-4AAF-8228-09A14A7B036A">
      <bpmn2:conditionExpression xsi:type="bpmn2:tFormalExpression" id="_AyztLE57EeiM2dG-KVIVyw" language="http://www.java.com/java"><![CDATA[return !serviceRequest.getApprovalStatus().equals("Denied") && serviceRequest.getActiveIndex() < serviceRequest.getApprovers().size();]]></bpmn2:conditionExpression>
    </bpmn2:sequenceFlow>
    <bpmn2:sequenceFlow id="_CA1DBDAF-7994-4A57-9193-AC6283E4A294" drools:selectable="true" color:background-color="#000000" color:border-color="#000000" color:color="#000000" sourceRef="_7C48F8D4-0621-45FD-A717-A6124F54F0EE" targetRef="_F6D5DA3F-0F56-4621-8B63-1FBC209D6E2D">
      <bpmn2:conditionExpression xsi:type="bpmn2:tFormalExpression" id="_AyztLU57EeiM2dG-KVIVyw" language="http://www.java.com/java"><![CDATA[return serviceRequest.getApprovalStatus().equals("Denied") || serviceRequest.getActiveIndex() >= serviceRequest.getApprovers().size();]]></bpmn2:conditionExpression>
    </bpmn2:sequenceFlow>
    <bpmn2:sequenceFlow id="_776BFFA0-E189-4DBD-8AFE-659C02892681" drools:selectable="true" color:background-color="#000000" color:border-color="#000000" color:color="#000000" sourceRef="_B9BC65A6-BE7A-4AAF-8228-09A14A7B036A" targetRef="_26C43A82-EC25-4941-A89A-123736556935"/>
    <bpmn2:exclusiveGateway id="_14750C5C-E4F4-4824-987E-2906585C7B13" drools:selectable="true" drools:dg="" color:background-color="#f0e68c" color:border-color="#a67f00" color:color="#000000" name="" gatewayDirection="Diverging">
      <bpmn2:incoming>_B472D834-5411-4C2E-A267-E27ABB41F329</bpmn2:incoming>
      <bpmn2:outgoing>_1A3B6504-EA58-414F-BEE3-4025A766D71B</bpmn2:outgoing>
      <bpmn2:outgoing>_D127D64C-7112-440B-B6F0-89778FE3CFB2</bpmn2:outgoing>
    </bpmn2:exclusiveGateway>
    <bpmn2:sequenceFlow id="_B472D834-5411-4C2E-A267-E27ABB41F329" drools:selectable="true" color:background-color="#000000" color:border-color="#000000" color:color="#000000" sourceRef="_91CA75FA-74A5-41D0-9EE3-F9FFA06D0357" targetRef="_14750C5C-E4F4-4824-987E-2906585C7B13"/>
    <bpmn2:scriptTask id="_48F7719C-D990-45E2-AB7E-0074DD2FD0B1" drools:selectable="true" color:background-color="#fafad2" color:border-color="#000000" color:color="#000000" name="SendQuotaSlack" scriptFormat="http://www.java.com/java">
      <bpmn2:extensionElements>
        <drools:metaData name="elementname">
          <drools:metaValue><![CDATA[SendQuotaSlack]]></drools:metaValue>
        </drools:metaData>
      </bpmn2:extensionElements>
      <bpmn2:incoming>_1A3B6504-EA58-414F-BEE3-4025A766D71B</bpmn2:incoming>
      <bpmn2:outgoing>_23FB082E-CFA3-450B-9F40-F8C561C2847B</bpmn2:outgoing>
      <bpmn2:script><![CDATA[	com.redhat.servicecatlog.ServiceRequest request = (com.redhat.servicecatlog.ServiceRequest)kcontext.getVariable("serviceRequest");
	com.redhat.servicecatlog.Approver approver = request.getQuotaApprover();
	approver.notifySlack(request.getRequester(), request.getServiceName(), request.getItem().toString());
	kcontext.setVariable("quota_approver_status", approver.getStatus());
	kcontext.setVariable("quota_approver_initiated_at", approver.getNotifyTime());]]></bpmn2:script>
    </bpmn2:scriptTask>
    <bpmn2:sequenceFlow id="_1A3B6504-EA58-414F-BEE3-4025A766D71B" drools:selectable="true" color:background-color="#000000" color:border-color="#000000" color:color="#000000" sourceRef="_14750C5C-E4F4-4824-987E-2906585C7B13" targetRef="_48F7719C-D990-45E2-AB7E-0074DD2FD0B1">
      <bpmn2:conditionExpression xsi:type="bpmn2:tFormalExpression" id="_Ay0UME57EeiM2dG-KVIVyw" language="http://www.java.com/java"><![CDATA[return "Failed".equals(serviceRequest.getQuotaStatus()) && (serviceRequest.getQuotaApprover()!=null);]]></bpmn2:conditionExpression>
    </bpmn2:sequenceFlow>
    <bpmn2:scriptTask id="_97961A1C-F195-40C4-8A96-A2D43E379604" drools:selectable="true" color:background-color="#fafad2" color:border-color="#000000" color:color="#000000" name="WaitQuotaSlack" scriptFormat="http://www.java.com/java">
      <bpmn2:extensionElements>
        <drools:metaData name="elementname">
          <drools:metaValue><![CDATA[WaitQuotaSlack]]></drools:metaValue>
        </drools:metaData>
      </bpmn2:extensionElements>
      <bpmn2:incoming>_23FB082E-CFA3-450B-9F40-F8C561C2847B</bpmn2:incoming>
      <bpmn2:outgoing>_20EA02BE-695C-4C54-ACE9-93D5015403CA</bpmn2:outgoing>
      <bpmn2:script><![CDATA[	com.redhat.servicecatlog.ServiceRequest request = (com.redhat.servicecatlog.ServiceRequest)kcontext.getVariable("serviceRequest");
	com.redhat.servicecatlog.Approver approver = request.getQuotaApprover();
	approver.waitForAction((String)kcontext.getVariable("slack_proxy_server"));
	kcontext.setVariable("quota_approver_status", approver.getStatus());
	kcontext.setVariable("quota_approver_approved_at", approver.getActionTime());
	if (approver.getStatus().equals("Approved")) {
	  request.setQuotaStatus("Ok");
	}]]></bpmn2:script>
    </bpmn2:scriptTask>
    <bpmn2:sequenceFlow id="_23FB082E-CFA3-450B-9F40-F8C561C2847B" drools:selectable="true" color:background-color="#000000" color:border-color="#000000" color:color="#000000" sourceRef="_48F7719C-D990-45E2-AB7E-0074DD2FD0B1" targetRef="_97961A1C-F195-40C4-8A96-A2D43E379604"/>
    <bpmn2:exclusiveGateway id="_9DFE8AE7-741B-4F06-863D-2D94DA0B1A1F" drools:selectable="true" drools:dg="" color:background-color="#f0e68c" color:border-color="#a67f00" color:color="#000000" name="" gatewayDirection="Converging">
      <bpmn2:incoming>_20EA02BE-695C-4C54-ACE9-93D5015403CA</bpmn2:incoming>
      <bpmn2:incoming>_15183CD4-F8DA-4EE2-B8CF-BFDF805EFB93</bpmn2:incoming>
      <bpmn2:incoming>_D127D64C-7112-440B-B6F0-89778FE3CFB2</bpmn2:incoming>
      <bpmn2:outgoing>_436E4390-69E3-4FD8-BD99-6B00ED73FB35</bpmn2:outgoing>
    </bpmn2:exclusiveGateway>
    <bpmn2:sequenceFlow id="_20EA02BE-695C-4C54-ACE9-93D5015403CA" drools:selectable="true" color:background-color="#000000" color:border-color="#000000" color:color="#000000" sourceRef="_97961A1C-F195-40C4-8A96-A2D43E379604" targetRef="_9DFE8AE7-741B-4F06-863D-2D94DA0B1A1F"/>
    <bpmn2:scriptTask id="_8735C8D8-3495-46BA-ACDF-81959FBAD3FB" drools:selectable="true" color:background-color="#fafad2" color:border-color="#000000" color:color="#000000" name="Finalization" scriptFormat="http://www.java.com/java">
      <bpmn2:extensionElements>
        <drools:metaData name="elementname">
          <drools:metaValue><![CDATA[Finalization]]></drools:metaValue>
        </drools:metaData>
      </bpmn2:extensionElements>
      <bpmn2:incoming>_436E4390-69E3-4FD8-BD99-6B00ED73FB35</bpmn2:incoming>
      <bpmn2:outgoing>_BBB2B814-690C-4C4E-8F54-53C209B73E97</bpmn2:outgoing>
      <bpmn2:script><![CDATA[	System.out.println("On finalization");

	com.redhat.servicecatlog.ServiceRequest request = (com.redhat.servicecatlog.ServiceRequest)kcontext.getVariable("serviceRequest");

	if (request == null) {
	  System.out.println("Why serviceRequest bocomes null?");
	}
	else {
	  if ("Failed".equals(request.getQuotaStatus())) {
	    System.out.println("Detect quota failed");
	    kcontext.setVariable("approval_status", "Denied");
	    kcontext.setVariable("quota_status", "Failed");
	  } 
	  else {
	    System.out.println("Quota seemd OK");
	    kcontext.setVariable("approval_status", request.getApprovalStatus());
	    kcontext.setVariable("quota_status", "Ok");
	  }
	}

	if ("Pending".equals(kcontext.getVariable("quota_approver_status"))){
	  kcontext.setVariable("quota_approver_status", "Skipped");
	}
	
	int numApprovers = Integer.parseInt((String)kcontext.getVariable("num_approvers"));
	for (int i = 1; i <= numApprovers; i++) {
	  if ("Pending".equals(kcontext.getVariable("approver_"+i+"_status"))){
	    kcontext.setVariable("approver_"+i+"_status", "Skipped");
	  }
	}
	
	System.out.println("Done with finalization");]]></bpmn2:script>
    </bpmn2:scriptTask>
    <bpmn2:sequenceFlow id="_436E4390-69E3-4FD8-BD99-6B00ED73FB35" drools:selectable="true" color:background-color="#000000" color:border-color="#000000" color:color="#000000" sourceRef="_9DFE8AE7-741B-4F06-863D-2D94DA0B1A1F" targetRef="_8735C8D8-3495-46BA-ACDF-81959FBAD3FB"/>
    <bpmn2:sequenceFlow id="_BBB2B814-690C-4C4E-8F54-53C209B73E97" drools:selectable="true" color:background-color="#000000" color:border-color="#000000" color:color="#000000" sourceRef="_8735C8D8-3495-46BA-ACDF-81959FBAD3FB" targetRef="_6E663A89-E712-45FF-BDFD-2907DB7CCAED"/>
    <bpmn2:sequenceFlow id="_D127D64C-7112-440B-B6F0-89778FE3CFB2" drools:selectable="true" color:background-color="#000000" color:border-color="#000000" color:color="#000000" sourceRef="_14750C5C-E4F4-4824-987E-2906585C7B13" targetRef="_9DFE8AE7-741B-4F06-863D-2D94DA0B1A1F">
      <bpmn2:conditionExpression xsi:type="bpmn2:tFormalExpression" id="_Ay0UMU57EeiM2dG-KVIVyw" language="http://www.java.com/java"><![CDATA[return !"Failed".equals(serviceRequest.getQuotaStatus()) || (serviceRequest.getQuotaApprover()==null);]]></bpmn2:conditionExpression>
    </bpmn2:sequenceFlow>
    <bpmn2:exclusiveGateway id="_95CCF899-73BE-4DAF-95F3-228AFF51FBFC" drools:selectable="true" drools:dg="" color:background-color="#f0e68c" color:border-color="#a67f00" color:color="#000000" name="" gatewayDirection="Diverging">
      <bpmn2:incoming>_39EE2C99-186C-4CD6-83BD-ED5F26ACBF59</bpmn2:incoming>
      <bpmn2:outgoing>_18A65292-92A0-4162-A5BF-EB33F861E263</bpmn2:outgoing>
      <bpmn2:outgoing>_15183CD4-F8DA-4EE2-B8CF-BFDF805EFB93</bpmn2:outgoing>
    </bpmn2:exclusiveGateway>
    <bpmn2:sequenceFlow id="_39EE2C99-186C-4CD6-83BD-ED5F26ACBF59" drools:selectable="true" color:background-color="#000000" color:border-color="#000000" color:color="#000000" sourceRef="_F6D5DA3F-0F56-4621-8B63-1FBC209D6E2D" targetRef="_95CCF899-73BE-4DAF-95F3-228AFF51FBFC"/>
    <bpmn2:sequenceFlow id="_18A65292-92A0-4162-A5BF-EB33F861E263" drools:selectable="true" color:background-color="#000000" color:border-color="#000000" color:color="#000000" sourceRef="_95CCF899-73BE-4DAF-95F3-228AFF51FBFC" targetRef="_91CA75FA-74A5-41D0-9EE3-F9FFA06D0357">
      <bpmn2:conditionExpression xsi:type="bpmn2:tFormalExpression" id="_Ay0UMk57EeiM2dG-KVIVyw" language="http://www.java.com/java"><![CDATA[return !"Denied".equals(serviceRequest.getApprovalStatus());]]></bpmn2:conditionExpression>
    </bpmn2:sequenceFlow>
    <bpmn2:sequenceFlow id="_15183CD4-F8DA-4EE2-B8CF-BFDF805EFB93" drools:selectable="true" color:background-color="#000000" color:border-color="#000000" color:color="#000000" sourceRef="_95CCF899-73BE-4DAF-95F3-228AFF51FBFC" targetRef="_9DFE8AE7-741B-4F06-863D-2D94DA0B1A1F">
      <bpmn2:conditionExpression xsi:type="bpmn2:tFormalExpression" id="_Ay0UM057EeiM2dG-KVIVyw" language="http://www.java.com/java"><![CDATA[return "Denied".equals(serviceRequest.getApprovalStatus());]]></bpmn2:conditionExpression>
    </bpmn2:sequenceFlow>
  </bpmn2:process>
  <bpmndi:BPMNDiagram id="_Ay0UNE57EeiM2dG-KVIVyw">
    <bpmndi:BPMNPlane id="_Ay0UNU57EeiM2dG-KVIVyw" bpmnElement="approval">
      <bpmndi:BPMNShape id="_Ay0UNk57EeiM2dG-KVIVyw" bpmnElement="processStartEvent">
        <dc:Bounds height="30.0" width="30.0" x="390.0" y="295.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="_Ay0UN057EeiM2dG-KVIVyw" bpmnElement="_4F0575FD-1ABB-4087-B353-2685994F92BD">
        <dc:Bounds height="80.0" width="100.0" x="585.0" y="270.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="_Ay0UOE57EeiM2dG-KVIVyw" bpmnElement="_50EA3FE4-C792-4BE0-8FBA-00274D1ECAE1">
        <dc:Bounds height="40.0" width="40.0" x="720.0" y="290.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="_Ay0UOU57EeiM2dG-KVIVyw" bpmnElement="_F6D5DA3F-0F56-4621-8B63-1FBC209D6E2D">
        <dc:Bounds height="40.0" width="40.0" x="1215.0" y="294.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="_Ay0UOk57EeiM2dG-KVIVyw" bpmnElement="_A6B334BF-F77B-4E5C-AD59-70A49A084350">
        <dc:Bounds height="80.0" width="100.0" x="450.0" y="270.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="_Ay0UO057EeiM2dG-KVIVyw" bpmnElement="_91CA75FA-74A5-41D0-9EE3-F9FFA06D0357">
        <dc:Bounds height="80.0" width="100.0" x="1080.0" y="465.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="_Ay0UPE57EeiM2dG-KVIVyw" bpmnElement="_6E663A89-E712-45FF-BDFD-2907DB7CCAED">
        <dc:Bounds height="28.0" width="28.0" x="390.0" y="491.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="_Ay0UPU57EeiM2dG-KVIVyw" bpmnElement="_B9BC65A6-BE7A-4AAF-8228-09A14A7B036A">
        <dc:Bounds height="40.0" width="40.0" x="795.0" y="290.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="_Ay0UPk57EeiM2dG-KVIVyw" bpmnElement="_26C43A82-EC25-4941-A89A-123736556935">
        <dc:Bounds height="80.0" width="100.0" x="870.0" y="270.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="_Ay0UP057EeiM2dG-KVIVyw" bpmnElement="_94547BB4-ED2C-496E-8A2C-F2C2F24DFEB6">
        <dc:Bounds height="80.0" width="100.0" x="1005.0" y="274.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="_Ay0UQE57EeiM2dG-KVIVyw" bpmnElement="_7C48F8D4-0621-45FD-A717-A6124F54F0EE">
        <dc:Bounds height="40.0" width="40.0" x="1140.0" y="294.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="_Ay0UQU57EeiM2dG-KVIVyw" bpmnElement="_14750C5C-E4F4-4824-987E-2906585C7B13">
        <dc:Bounds height="40.0" width="40.0" x="990.0" y="485.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="_Ay0UQk57EeiM2dG-KVIVyw" bpmnElement="_48F7719C-D990-45E2-AB7E-0074DD2FD0B1">
        <dc:Bounds height="79.0" width="107.0" x="840.0" y="465.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="_Ay0UQ057EeiM2dG-KVIVyw" bpmnElement="_97961A1C-F195-40C4-8A96-A2D43E379604">
        <dc:Bounds height="80.0" width="100.0" x="690.0" y="465.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="_Ay0URE57EeiM2dG-KVIVyw" bpmnElement="_9DFE8AE7-741B-4F06-863D-2D94DA0B1A1F">
        <dc:Bounds height="40.0" width="40.0" x="600.0" y="485.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="_Ay0URU57EeiM2dG-KVIVyw" bpmnElement="_8735C8D8-3495-46BA-ACDF-81959FBAD3FB">
        <dc:Bounds height="80.0" width="100.0" x="450.0" y="465.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="_Ay0URk57EeiM2dG-KVIVyw" bpmnElement="_95CCF899-73BE-4DAF-95F3-228AFF51FBFC">
        <dc:Bounds height="40.0" width="40.0" x="1215.0" y="405.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="_Ay0UR057EeiM2dG-KVIVyw" bpmnElement="_7225B280-6E01-4585-AC7B-A5FC5534BF24" sourceElement="_Ay0UN057EeiM2dG-KVIVyw" targetElement="_Ay0UOE57EeiM2dG-KVIVyw">
        <di:waypoint xsi:type="dc:Point" x="635.0" y="310.0"/>
        <di:waypoint xsi:type="dc:Point" x="740.0" y="310.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="_Ay0USE57EeiM2dG-KVIVyw" bpmnElement="_70EAFBD3-AE96-4D01-8CE1-CBA5693274EF" sourceElement="_Ay0UOE57EeiM2dG-KVIVyw" targetElement="_Ay0UPU57EeiM2dG-KVIVyw">
        <di:waypoint xsi:type="dc:Point" x="740.0" y="310.0"/>
        <di:waypoint xsi:type="dc:Point" x="815.0" y="310.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="_Ay0USU57EeiM2dG-KVIVyw" bpmnElement="_7F56DA34-E1CE-46A3-A31F-E1A28930BD00" sourceElement="_Ay0UNk57EeiM2dG-KVIVyw" targetElement="_Ay0UOk57EeiM2dG-KVIVyw">
        <di:waypoint xsi:type="dc:Point" x="405.0" y="310.0"/>
        <di:waypoint xsi:type="dc:Point" x="500.0" y="310.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="_Ay0USk57EeiM2dG-KVIVyw" bpmnElement="_CC23BBB4-1F53-4491-9263-C75DEC26C519" sourceElement="_Ay0UOk57EeiM2dG-KVIVyw" targetElement="_Ay0UN057EeiM2dG-KVIVyw">
        <di:waypoint xsi:type="dc:Point" x="500.0" y="310.0"/>
        <di:waypoint xsi:type="dc:Point" x="635.0" y="310.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="_Ay0US057EeiM2dG-KVIVyw" bpmnElement="_DD4E808B-3000-47F0-82FE-5C22E753BD32" sourceElement="_Ay0UOE57EeiM2dG-KVIVyw" targetElement="_Ay0UOU57EeiM2dG-KVIVyw">
        <di:waypoint xsi:type="dc:Point" x="740.0" y="310.0"/>
        <di:waypoint xsi:type="dc:Point" x="740.0" y="234.0"/>
        <di:waypoint xsi:type="dc:Point" x="1235.0" y="234.0"/>
        <di:waypoint xsi:type="dc:Point" x="1235.0" y="314.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="_Ay0UTE57EeiM2dG-KVIVyw" bpmnElement="_04D5E1EE-BAC9-495D-913F-1CB1B0AFA7E1" sourceElement="_Ay0UPk57EeiM2dG-KVIVyw" targetElement="_Ay0UP057EeiM2dG-KVIVyw">
        <di:waypoint xsi:type="dc:Point" x="920.0" y="310.0"/>
        <di:waypoint xsi:type="dc:Point" x="1055.0" y="314.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="_Ay0UTU57EeiM2dG-KVIVyw" bpmnElement="_1C3DB779-C303-4D2A-A294-0F31925585BC" sourceElement="_Ay0UP057EeiM2dG-KVIVyw" targetElement="_Ay0UQE57EeiM2dG-KVIVyw">
        <di:waypoint xsi:type="dc:Point" x="1055.0" y="314.0"/>
        <di:waypoint xsi:type="dc:Point" x="1160.0" y="314.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="_Ay0UTk57EeiM2dG-KVIVyw" bpmnElement="_FDC2EFF2-4086-43F3-9BA9-84355186C8FA" sourceElement="_Ay0UQE57EeiM2dG-KVIVyw" targetElement="_Ay0UPU57EeiM2dG-KVIVyw">
        <di:waypoint xsi:type="dc:Point" x="1160.0" y="314.0"/>
        <di:waypoint xsi:type="dc:Point" x="1160.0" y="385.0"/>
        <di:waypoint xsi:type="dc:Point" x="815.0" y="385.0"/>
        <di:waypoint xsi:type="dc:Point" x="815.0" y="310.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="_Ay0UT057EeiM2dG-KVIVyw" bpmnElement="_CA1DBDAF-7994-4A57-9193-AC6283E4A294" sourceElement="_Ay0UQE57EeiM2dG-KVIVyw" targetElement="_Ay0UOU57EeiM2dG-KVIVyw">
        <di:waypoint xsi:type="dc:Point" x="1160.0" y="314.0"/>
        <di:waypoint xsi:type="dc:Point" x="1235.0" y="314.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="_Ay0UUE57EeiM2dG-KVIVyw" bpmnElement="_776BFFA0-E189-4DBD-8AFE-659C02892681" sourceElement="_Ay0UPU57EeiM2dG-KVIVyw" targetElement="_Ay0UPk57EeiM2dG-KVIVyw">
        <di:waypoint xsi:type="dc:Point" x="815.0" y="310.0"/>
        <di:waypoint xsi:type="dc:Point" x="920.0" y="310.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="_Ay0UUU57EeiM2dG-KVIVyw" bpmnElement="_B472D834-5411-4C2E-A267-E27ABB41F329" sourceElement="_Ay0UO057EeiM2dG-KVIVyw" targetElement="_Ay0UQU57EeiM2dG-KVIVyw">
        <di:waypoint xsi:type="dc:Point" x="1130.0" y="505.0"/>
        <di:waypoint xsi:type="dc:Point" x="1010.0" y="505.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="_Ay0UUk57EeiM2dG-KVIVyw" bpmnElement="_1A3B6504-EA58-414F-BEE3-4025A766D71B" sourceElement="_Ay0UQU57EeiM2dG-KVIVyw" targetElement="_Ay0UQk57EeiM2dG-KVIVyw">
        <di:waypoint xsi:type="dc:Point" x="1010.0" y="505.0"/>
        <di:waypoint xsi:type="dc:Point" x="893.5" y="504.5"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="_Ay0UU057EeiM2dG-KVIVyw" bpmnElement="_23FB082E-CFA3-450B-9F40-F8C561C2847B" sourceElement="_Ay0UQk57EeiM2dG-KVIVyw" targetElement="_Ay0UQ057EeiM2dG-KVIVyw">
        <di:waypoint xsi:type="dc:Point" x="893.5" y="504.5"/>
        <di:waypoint xsi:type="dc:Point" x="740.0" y="505.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="_Ay0UVE57EeiM2dG-KVIVyw" bpmnElement="_20EA02BE-695C-4C54-ACE9-93D5015403CA" sourceElement="_Ay0UQ057EeiM2dG-KVIVyw" targetElement="_Ay0URE57EeiM2dG-KVIVyw">
        <di:waypoint xsi:type="dc:Point" x="740.0" y="505.0"/>
        <di:waypoint xsi:type="dc:Point" x="620.0" y="505.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="_Ay0UVU57EeiM2dG-KVIVyw" bpmnElement="_436E4390-69E3-4FD8-BD99-6B00ED73FB35" sourceElement="_Ay0URE57EeiM2dG-KVIVyw" targetElement="_Ay0URU57EeiM2dG-KVIVyw">
        <di:waypoint xsi:type="dc:Point" x="620.0" y="505.0"/>
        <di:waypoint xsi:type="dc:Point" x="500.0" y="505.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="_Ay0UVk57EeiM2dG-KVIVyw" bpmnElement="_BBB2B814-690C-4C4E-8F54-53C209B73E97" sourceElement="_Ay0URU57EeiM2dG-KVIVyw" targetElement="_Ay0UPE57EeiM2dG-KVIVyw">
        <di:waypoint xsi:type="dc:Point" x="500.0" y="505.0"/>
        <di:waypoint xsi:type="dc:Point" x="404.0" y="505.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="_Ay0UV057EeiM2dG-KVIVyw" bpmnElement="_D127D64C-7112-440B-B6F0-89778FE3CFB2" sourceElement="_Ay0UQU57EeiM2dG-KVIVyw" targetElement="_Ay0URE57EeiM2dG-KVIVyw">
        <di:waypoint xsi:type="dc:Point" x="1010.0" y="505.0"/>
        <di:waypoint xsi:type="dc:Point" x="1010.0" y="579.0"/>
        <di:waypoint xsi:type="dc:Point" x="620.0" y="579.0"/>
        <di:waypoint xsi:type="dc:Point" x="620.0" y="505.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="_Ay0UWE57EeiM2dG-KVIVyw" bpmnElement="_39EE2C99-186C-4CD6-83BD-ED5F26ACBF59" sourceElement="_Ay0UOU57EeiM2dG-KVIVyw" targetElement="_Ay0URk57EeiM2dG-KVIVyw">
        <di:waypoint xsi:type="dc:Point" x="1235.0" y="314.0"/>
        <di:waypoint xsi:type="dc:Point" x="1235.0" y="425.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="_Ay0UWU57EeiM2dG-KVIVyw" bpmnElement="_18A65292-92A0-4162-A5BF-EB33F861E263" sourceElement="_Ay0URk57EeiM2dG-KVIVyw" targetElement="_Ay0UO057EeiM2dG-KVIVyw">
        <di:waypoint xsi:type="dc:Point" x="1235.0" y="425.0"/>
        <di:waypoint xsi:type="dc:Point" x="1235.0" y="505.0"/>
        <di:waypoint xsi:type="dc:Point" x="1130.0" y="505.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="_Ay0UWk57EeiM2dG-KVIVyw" bpmnElement="_15183CD4-F8DA-4EE2-B8CF-BFDF805EFB93" sourceElement="_Ay0URk57EeiM2dG-KVIVyw" targetElement="_Ay0URE57EeiM2dG-KVIVyw">
        <di:waypoint xsi:type="dc:Point" x="1235.0" y="425.0"/>
        <di:waypoint xsi:type="dc:Point" x="620.0" y="425.0"/>
        <di:waypoint xsi:type="dc:Point" x="620.0" y="505.0"/>
      </bpmndi:BPMNEdge>
    </bpmndi:BPMNPlane>
  </bpmndi:BPMNDiagram>
  <bpmn2:relationship id="_Ay0UW057EeiM2dG-KVIVyw" type="BPSimData">
    <bpmn2:extensionElements>
      <bpsim:BPSimData>
        <bpsim:Scenario xsi:type="bpsim:Scenario" id="default" name="Simulationscenario">
          <bpsim:ScenarioParameters xsi:type="bpsim:ScenarioParameters" baseTimeUnit="min"/>
          <bpsim:ElementParameters xsi:type="bpsim:ElementParameters" elementRef="_70EAFBD3-AE96-4D01-8CE1-CBA5693274EF" id="_Ay0UXE57EeiM2dG-KVIVyw">
            <bpsim:ControlParameters xsi:type="bpsim:ControlParameters">
              <bpsim:Probability xsi:type="bpsim:Parameter">
                <bpsim:FloatingParameter value="50.0"/>
              </bpsim:Probability>
            </bpsim:ControlParameters>
          </bpsim:ElementParameters>
          <bpsim:ElementParameters xsi:type="bpsim:ElementParameters" elementRef="_23FB082E-CFA3-450B-9F40-F8C561C2847B" id="_Ay0UXU57EeiM2dG-KVIVyw">
            <bpsim:ControlParameters xsi:type="bpsim:ControlParameters">
              <bpsim:Probability xsi:type="bpsim:Parameter">
                <bpsim:FloatingParameter value="100.0"/>
              </bpsim:Probability>
            </bpsim:ControlParameters>
          </bpsim:ElementParameters>
          <bpsim:ElementParameters xsi:type="bpsim:ElementParameters" elementRef="_04D5E1EE-BAC9-495D-913F-1CB1B0AFA7E1" id="_Ay0UXk57EeiM2dG-KVIVyw">
            <bpsim:ControlParameters xsi:type="bpsim:ControlParameters">
              <bpsim:Probability xsi:type="bpsim:Parameter">
                <bpsim:FloatingParameter value="100.0"/>
              </bpsim:Probability>
            </bpsim:ControlParameters>
          </bpsim:ElementParameters>
          <bpsim:ElementParameters xsi:type="bpsim:ElementParameters" elementRef="_15183CD4-F8DA-4EE2-B8CF-BFDF805EFB93" id="_Ay0UX057EeiM2dG-KVIVyw">
            <bpsim:ControlParameters xsi:type="bpsim:ControlParameters">
              <bpsim:Probability xsi:type="bpsim:Parameter">
                <bpsim:FloatingParameter value="100.0"/>
              </bpsim:Probability>
            </bpsim:ControlParameters>
          </bpsim:ElementParameters>
          <bpsim:ElementParameters xsi:type="bpsim:ElementParameters" elementRef="_18A65292-92A0-4162-A5BF-EB33F861E263" id="_Ay0UYE57EeiM2dG-KVIVyw">
            <bpsim:ControlParameters xsi:type="bpsim:ControlParameters">
              <bpsim:Probability xsi:type="bpsim:Parameter">
                <bpsim:FloatingParameter value="100.0"/>
              </bpsim:Probability>
            </bpsim:ControlParameters>
          </bpsim:ElementParameters>
          <bpsim:ElementParameters xsi:type="bpsim:ElementParameters" elementRef="_6E663A89-E712-45FF-BDFD-2907DB7CCAED" id="_Ay0UYU57EeiM2dG-KVIVyw">
            <bpsim:TimeParameters xsi:type="bpsim:TimeParameters">
              <bpsim:ProcessingTime xsi:type="bpsim:Parameter">
                <bpsim:UniformDistribution max="10.0" min="5.0"/>
              </bpsim:ProcessingTime>
            </bpsim:TimeParameters>
          </bpsim:ElementParameters>
          <bpsim:ElementParameters xsi:type="bpsim:ElementParameters" elementRef="_FDC2EFF2-4086-43F3-9BA9-84355186C8FA" id="_Ay0UYk57EeiM2dG-KVIVyw">
            <bpsim:ControlParameters xsi:type="bpsim:ControlParameters">
              <bpsim:Probability xsi:type="bpsim:Parameter">
                <bpsim:FloatingParameter value="100.0"/>
              </bpsim:Probability>
            </bpsim:ControlParameters>
          </bpsim:ElementParameters>
          <bpsim:ElementParameters xsi:type="bpsim:ElementParameters" elementRef="_CA1DBDAF-7994-4A57-9193-AC6283E4A294" id="_Ay0UY057EeiM2dG-KVIVyw">
            <bpsim:ControlParameters xsi:type="bpsim:ControlParameters">
              <bpsim:Probability xsi:type="bpsim:Parameter">
                <bpsim:FloatingParameter value="100.0"/>
              </bpsim:Probability>
            </bpsim:ControlParameters>
          </bpsim:ElementParameters>
          <bpsim:ElementParameters xsi:type="bpsim:ElementParameters" elementRef="_BBB2B814-690C-4C4E-8F54-53C209B73E97" id="_Ay0UZE57EeiM2dG-KVIVyw">
            <bpsim:ControlParameters xsi:type="bpsim:ControlParameters">
              <bpsim:Probability xsi:type="bpsim:Parameter">
                <bpsim:FloatingParameter value="100.0"/>
              </bpsim:Probability>
            </bpsim:ControlParameters>
          </bpsim:ElementParameters>
          <bpsim:ElementParameters xsi:type="bpsim:ElementParameters" elementRef="_A6B334BF-F77B-4E5C-AD59-70A49A084350" id="_Ay0UZU57EeiM2dG-KVIVyw">
            <bpsim:TimeParameters xsi:type="bpsim:TimeParameters">
              <bpsim:ProcessingTime xsi:type="bpsim:Parameter">
                <bpsim:UniformDistribution max="10.0" min="5.0"/>
              </bpsim:ProcessingTime>
            </bpsim:TimeParameters>
            <bpsim:CostParameters xsi:type="bpsim:CostParameters">
              <bpsim:UnitCost xsi:type="bpsim:Parameter">
                <bpsim:FloatingParameter value="0.0"/>
              </bpsim:UnitCost>
            </bpsim:CostParameters>
          </bpsim:ElementParameters>
          <bpsim:ElementParameters xsi:type="bpsim:ElementParameters" elementRef="_48F7719C-D990-45E2-AB7E-0074DD2FD0B1" id="_Ay0UZk57EeiM2dG-KVIVyw">
            <bpsim:TimeParameters xsi:type="bpsim:TimeParameters">
              <bpsim:ProcessingTime xsi:type="bpsim:Parameter">
                <bpsim:UniformDistribution max="10.0" min="5.0"/>
              </bpsim:ProcessingTime>
            </bpsim:TimeParameters>
            <bpsim:CostParameters xsi:type="bpsim:CostParameters">
              <bpsim:UnitCost xsi:type="bpsim:Parameter">
                <bpsim:FloatingParameter value="0.0"/>
              </bpsim:UnitCost>
            </bpsim:CostParameters>
          </bpsim:ElementParameters>
          <bpsim:ElementParameters xsi:type="bpsim:ElementParameters" elementRef="_26C43A82-EC25-4941-A89A-123736556935" id="_Ay0UZ057EeiM2dG-KVIVyw">
            <bpsim:TimeParameters xsi:type="bpsim:TimeParameters">
              <bpsim:ProcessingTime xsi:type="bpsim:Parameter">
                <bpsim:UniformDistribution max="10.0" min="5.0"/>
              </bpsim:ProcessingTime>
            </bpsim:TimeParameters>
            <bpsim:CostParameters xsi:type="bpsim:CostParameters">
              <bpsim:UnitCost xsi:type="bpsim:Parameter">
                <bpsim:FloatingParameter value="0.0"/>
              </bpsim:UnitCost>
            </bpsim:CostParameters>
          </bpsim:ElementParameters>
          <bpsim:ElementParameters xsi:type="bpsim:ElementParameters" elementRef="_776BFFA0-E189-4DBD-8AFE-659C02892681" id="_Ay0UaE57EeiM2dG-KVIVyw">
            <bpsim:ControlParameters xsi:type="bpsim:ControlParameters">
              <bpsim:Probability xsi:type="bpsim:Parameter">
                <bpsim:FloatingParameter value="100.0"/>
              </bpsim:Probability>
            </bpsim:ControlParameters>
          </bpsim:ElementParameters>
          <bpsim:ElementParameters xsi:type="bpsim:ElementParameters" elementRef="_97961A1C-F195-40C4-8A96-A2D43E379604" id="_Ay0UaU57EeiM2dG-KVIVyw">
            <bpsim:TimeParameters xsi:type="bpsim:TimeParameters">
              <bpsim:ProcessingTime xsi:type="bpsim:Parameter">
                <bpsim:UniformDistribution max="10.0" min="5.0"/>
              </bpsim:ProcessingTime>
            </bpsim:TimeParameters>
            <bpsim:CostParameters xsi:type="bpsim:CostParameters">
              <bpsim:UnitCost xsi:type="bpsim:Parameter">
                <bpsim:FloatingParameter value="0.0"/>
              </bpsim:UnitCost>
            </bpsim:CostParameters>
          </bpsim:ElementParameters>
          <bpsim:ElementParameters xsi:type="bpsim:ElementParameters" elementRef="_94547BB4-ED2C-496E-8A2C-F2C2F24DFEB6" id="_Ay0Uak57EeiM2dG-KVIVyw">
            <bpsim:TimeParameters xsi:type="bpsim:TimeParameters">
              <bpsim:ProcessingTime xsi:type="bpsim:Parameter">
                <bpsim:UniformDistribution max="10.0" min="5.0"/>
              </bpsim:ProcessingTime>
            </bpsim:TimeParameters>
            <bpsim:CostParameters xsi:type="bpsim:CostParameters">
              <bpsim:UnitCost xsi:type="bpsim:Parameter">
                <bpsim:FloatingParameter value="0.0"/>
              </bpsim:UnitCost>
            </bpsim:CostParameters>
          </bpsim:ElementParameters>
          <bpsim:ElementParameters xsi:type="bpsim:ElementParameters" elementRef="_7F56DA34-E1CE-46A3-A31F-E1A28930BD00" id="_Ay0Ua057EeiM2dG-KVIVyw">
            <bpsim:ControlParameters xsi:type="bpsim:ControlParameters">
              <bpsim:Probability xsi:type="bpsim:Parameter">
                <bpsim:FloatingParameter value="100.0"/>
              </bpsim:Probability>
            </bpsim:ControlParameters>
          </bpsim:ElementParameters>
          <bpsim:ElementParameters xsi:type="bpsim:ElementParameters" elementRef="_B472D834-5411-4C2E-A267-E27ABB41F329" id="_Ay0UbE57EeiM2dG-KVIVyw">
            <bpsim:ControlParameters xsi:type="bpsim:ControlParameters">
              <bpsim:Probability xsi:type="bpsim:Parameter">
                <bpsim:FloatingParameter value="100.0"/>
              </bpsim:Probability>
            </bpsim:ControlParameters>
          </bpsim:ElementParameters>
          <bpsim:ElementParameters xsi:type="bpsim:ElementParameters" elementRef="processStartEvent" id="_Ay0UbU57EeiM2dG-KVIVyw">
            <bpsim:TimeParameters xsi:type="bpsim:TimeParameters">
              <bpsim:ProcessingTime xsi:type="bpsim:Parameter">
                <bpsim:UniformDistribution max="10.0" min="5.0"/>
              </bpsim:ProcessingTime>
            </bpsim:TimeParameters>
            <bpsim:ControlParameters xsi:type="bpsim:ControlParameters">
              <bpsim:Probability xsi:type="bpsim:Parameter">
                <bpsim:FloatingParameter value="100.0"/>
              </bpsim:Probability>
            </bpsim:ControlParameters>
          </bpsim:ElementParameters>
          <bpsim:ElementParameters xsi:type="bpsim:ElementParameters" elementRef="_1C3DB779-C303-4D2A-A294-0F31925585BC" id="_Ay0Ubk57EeiM2dG-KVIVyw">
            <bpsim:ControlParameters xsi:type="bpsim:ControlParameters">
              <bpsim:Probability xsi:type="bpsim:Parameter">
                <bpsim:FloatingParameter value="100.0"/>
              </bpsim:Probability>
            </bpsim:ControlParameters>
          </bpsim:ElementParameters>
          <bpsim:ElementParameters xsi:type="bpsim:ElementParameters" elementRef="_1A3B6504-EA58-414F-BEE3-4025A766D71B" id="_Ay0Ub057EeiM2dG-KVIVyw">
            <bpsim:ControlParameters xsi:type="bpsim:ControlParameters">
              <bpsim:Probability xsi:type="bpsim:Parameter">
                <bpsim:FloatingParameter value="50.0"/>
              </bpsim:Probability>
            </bpsim:ControlParameters>
          </bpsim:ElementParameters>
          <bpsim:ElementParameters xsi:type="bpsim:ElementParameters" elementRef="_4F0575FD-1ABB-4087-B353-2685994F92BD" id="_Ay0UcE57EeiM2dG-KVIVyw">
            <bpsim:TimeParameters xsi:type="bpsim:TimeParameters">
              <bpsim:ProcessingTime xsi:type="bpsim:Parameter">
                <bpsim:UniformDistribution max="10.0" min="5.0"/>
              </bpsim:ProcessingTime>
            </bpsim:TimeParameters>
            <bpsim:CostParameters xsi:type="bpsim:CostParameters">
              <bpsim:UnitCost xsi:type="bpsim:Parameter">
                <bpsim:FloatingParameter value="0.0"/>
              </bpsim:UnitCost>
            </bpsim:CostParameters>
          </bpsim:ElementParameters>
          <bpsim:ElementParameters xsi:type="bpsim:ElementParameters" elementRef="_91CA75FA-74A5-41D0-9EE3-F9FFA06D0357" id="_Ay0UcU57EeiM2dG-KVIVyw">
            <bpsim:TimeParameters xsi:type="bpsim:TimeParameters">
              <bpsim:ProcessingTime xsi:type="bpsim:Parameter">
                <bpsim:UniformDistribution max="10.0" min="5.0"/>
              </bpsim:ProcessingTime>
            </bpsim:TimeParameters>
            <bpsim:CostParameters xsi:type="bpsim:CostParameters">
              <bpsim:UnitCost xsi:type="bpsim:Parameter">
                <bpsim:FloatingParameter value="0.0"/>
              </bpsim:UnitCost>
            </bpsim:CostParameters>
          </bpsim:ElementParameters>
          <bpsim:ElementParameters xsi:type="bpsim:ElementParameters" elementRef="_D127D64C-7112-440B-B6F0-89778FE3CFB2" id="_Ay0Uck57EeiM2dG-KVIVyw">
            <bpsim:ControlParameters xsi:type="bpsim:ControlParameters">
              <bpsim:Probability xsi:type="bpsim:Parameter">
                <bpsim:FloatingParameter value="50.0"/>
              </bpsim:Probability>
            </bpsim:ControlParameters>
          </bpsim:ElementParameters>
          <bpsim:ElementParameters xsi:type="bpsim:ElementParameters" elementRef="_CC23BBB4-1F53-4491-9263-C75DEC26C519" id="_Ay0Uc057EeiM2dG-KVIVyw">
            <bpsim:ControlParameters xsi:type="bpsim:ControlParameters">
              <bpsim:Probability xsi:type="bpsim:Parameter">
                <bpsim:FloatingParameter value="100.0"/>
              </bpsim:Probability>
            </bpsim:ControlParameters>
          </bpsim:ElementParameters>
          <bpsim:ElementParameters xsi:type="bpsim:ElementParameters" elementRef="_7225B280-6E01-4585-AC7B-A5FC5534BF24" id="_Ay0UdE57EeiM2dG-KVIVyw">
            <bpsim:ControlParameters xsi:type="bpsim:ControlParameters">
              <bpsim:Probability xsi:type="bpsim:Parameter">
                <bpsim:FloatingParameter value="100.0"/>
              </bpsim:Probability>
            </bpsim:ControlParameters>
          </bpsim:ElementParameters>
          <bpsim:ElementParameters xsi:type="bpsim:ElementParameters" elementRef="_8735C8D8-3495-46BA-ACDF-81959FBAD3FB" id="_Ay0UdU57EeiM2dG-KVIVyw">
            <bpsim:TimeParameters xsi:type="bpsim:TimeParameters">
              <bpsim:ProcessingTime xsi:type="bpsim:Parameter">
                <bpsim:UniformDistribution max="10.0" min="5.0"/>
              </bpsim:ProcessingTime>
            </bpsim:TimeParameters>
            <bpsim:CostParameters xsi:type="bpsim:CostParameters">
              <bpsim:UnitCost xsi:type="bpsim:Parameter">
                <bpsim:FloatingParameter value="0.0"/>
              </bpsim:UnitCost>
            </bpsim:CostParameters>
          </bpsim:ElementParameters>
          <bpsim:ElementParameters xsi:type="bpsim:ElementParameters" elementRef="_436E4390-69E3-4FD8-BD99-6B00ED73FB35" id="_Ay0Udk57EeiM2dG-KVIVyw">
            <bpsim:ControlParameters xsi:type="bpsim:ControlParameters">
              <bpsim:Probability xsi:type="bpsim:Parameter">
                <bpsim:FloatingParameter value="100.0"/>
              </bpsim:Probability>
            </bpsim:ControlParameters>
          </bpsim:ElementParameters>
          <bpsim:ElementParameters xsi:type="bpsim:ElementParameters" elementRef="_20EA02BE-695C-4C54-ACE9-93D5015403CA" id="_Ay0Ud057EeiM2dG-KVIVyw">
            <bpsim:ControlParameters xsi:type="bpsim:ControlParameters">
              <bpsim:Probability xsi:type="bpsim:Parameter">
                <bpsim:FloatingParameter value="100.0"/>
              </bpsim:Probability>
            </bpsim:ControlParameters>
          </bpsim:ElementParameters>
          <bpsim:ElementParameters xsi:type="bpsim:ElementParameters" elementRef="_39EE2C99-186C-4CD6-83BD-ED5F26ACBF59" id="_Ay0UeE57EeiM2dG-KVIVyw">
            <bpsim:ControlParameters xsi:type="bpsim:ControlParameters">
              <bpsim:Probability xsi:type="bpsim:Parameter">
                <bpsim:FloatingParameter value="100.0"/>
              </bpsim:Probability>
            </bpsim:ControlParameters>
          </bpsim:ElementParameters>
          <bpsim:ElementParameters xsi:type="bpsim:ElementParameters" elementRef="_DD4E808B-3000-47F0-82FE-5C22E753BD32" id="_Ay0UeU57EeiM2dG-KVIVyw">
            <bpsim:ControlParameters xsi:type="bpsim:ControlParameters">
              <bpsim:Probability xsi:type="bpsim:Parameter">
                <bpsim:FloatingParameter value="50.0"/>
              </bpsim:Probability>
            </bpsim:ControlParameters>
          </bpsim:ElementParameters>
        </bpsim:Scenario>
      </bpsim:BPSimData>
    </bpmn2:extensionElements>
    <bpmn2:source>_AyztIE57EeiM2dG-KVIVyw</bpmn2:source>
    <bpmn2:target>_AyztIE57EeiM2dG-KVIVyw</bpmn2:target>
  </bpmn2:relationship>
</bpmn2:definitions>
